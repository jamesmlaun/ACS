=== Log Filtering Information ===
The following patterns were suppressed from tool output:
- Unable to modify prefetchers
- enabling random access
Reason: these are environment-related warnings in WSL2 that do not affect measurement.
================================

=== Environment Information ===
CPU information (lscpu):
Architecture:                         x86_64
CPU op-mode(s):                       32-bit, 64-bit
Address sizes:                        39 bits physical, 48 bits virtual
Byte Order:                           Little Endian
CPU(s):                               16
On-line CPU(s) list:                  0-15
Vendor ID:                            GenuineIntel
Model name:                           11th Gen Intel(R) Core(TM) i7-11850H @ 2.50GHz
CPU family:                           6
Model:                                141
Thread(s) per core:                   2
Core(s) per socket:                   8
Socket(s):                            1
Stepping:                             1
BogoMIPS:                             4992.00
Flags:                                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon rep_good nopl xtopology cpuid tsc_known_freq pni pclmulqdq ssse3 fma cx16 pdcm pcid sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnowprefetch ssbd ibrs ibpb stibp ibrs_enhanced fsgsbase bmi1 avx2 smep bmi2 erms invpcid avx512f avx512dq rdseed adx smap avx512ifma clflushopt clwb avx512cd sha_ni avx512bw avx512vl xsaveopt xsavec xgetbv1 xsaves avx512vbmi umip avx512_vbmi2 gfni vaes vpclmulqdq avx512_vnni avx512_bitalg avx512_vpopcntdq rdpid fsrm avx512_vp2intersect md_clear flush_l1d arch_capabilities
Hypervisor vendor:                    Microsoft
Virtualization type:                  full
L1d cache:                            384 KiB (8 instances)
L1i cache:                            256 KiB (8 instances)
L2 cache:                             10 MiB (8 instances)
L3 cache:                             24 MiB (1 instance)
NUMA node(s):                         1
NUMA node0 CPU(s):                    0-15
Vulnerability Gather data sampling:   Unknown: Dependent on hypervisor status
Vulnerability Itlb multihit:          Not affected
Vulnerability L1tf:                   Not affected
Vulnerability Mds:                    Not affected
Vulnerability Meltdown:               Not affected
Vulnerability Mmio stale data:        Not affected
Vulnerability Reg file data sampling: Not affected
Vulnerability Retbleed:               Mitigation; Enhanced IBRS
Vulnerability Spec rstack overflow:   Not affected
Vulnerability Spec store bypass:      Mitigation; Speculative Store Bypass disabled via prctl
Vulnerability Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization
Vulnerability Spectre v2:             Mitigation; Enhanced / Automatic IBRS; IBPB conditional; RSB filling; PBRSB-eIBRS SW sequence; BHI SW loop, KVM SW loop
Vulnerability Srbds:                  Not affected
Vulnerability Tsx async abort:        Not affected

CPU frequency governor:

Note: CPU frequency scaling managed by Windows Power Options (min/max=99% to prevent turbo).
Governor not directly configurable under WSL2; assumed performance mode.

Tool versions:
MLC version:
perf version 6.6.87.2.g427645e3db3a
Perf version:
perf version 6.6.87.2.g427645e3db3a
===============================

[ENV] /proc/meminfo
MemTotal:       16224440 kB
MemFree:        15656552 kB
MemAvailable:   15594212 kB
Buffers:             460 kB
Cached:           109952 kB
SwapCached:         5136 kB
Active:            33200 kB
Inactive:         204332 kB
Active(anon):       2880 kB
Inactive(anon):   127072 kB
Active(file):      30320 kB
Inactive(file):    77260 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:       4194304 kB
SwapFree:        4162552 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:        122800 kB
Mapped:            36788 kB
Shmem:              2832 kB
KReclaimable:      18576 kB
Slab:              76804 kB
SReclaimable:      18576 kB
SUnreclaim:        58228 kB
KernelStack:        4192 kB
PageTables:         1912 kB
SecPageTables:         0 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    12306524 kB
Committed_AS:    1061492 kB
VmallocTotal:   34359738367 kB
VmallocUsed:       27544 kB
VmallocChunk:          0 kB
Percpu:             4608 kB
HardwareCorrupted:     0 kB
AnonHugePages:     71680 kB
ShmemHugePages:        0 kB
ShmemPmdMapped:        0 kB
FileHugePages:         0 kB
FilePmdMapped:         0 kB
Unaccepted:            0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
Hugetlb:               0 kB
DirectMap4k:       23552 kB
DirectMap2M:     5064704 kB
DirectMap1G:    19922944 kB

[ENV] /sys/kernel/mm/transparent_hugepage/enabled
[always] madvise never

[ENV] /sys/kernel/mm/transparent_hugepage/defrag
always defer defer+madvise [madvise] never

[COMPILE] g++ -O3 -march=native -std=c++17 saxpy_tlb.cpp -o build/saxpy_tlb
[WARMUP] taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
[RUN] rep=1, huge=on, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random on
runtime_ms=1468.76
gflops=0.0680846

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15622536 kB
  MemAvailable:   15560220 kB
  Buffers:             468 kB
  Cached:           109968 kB
  SwapCached:         5136 kB
  Active:            62528 kB
  Inactive:         209800 kB
  Active(anon):       2880 kB
  Inactive(anon):   161844 kB
  Active(file):      59648 kB
  Inactive(file):    47956 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158480 kB
  Mapped:            42620 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76916 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58320 kB
  KernelStack:        4208 kB
  PageTables:         1928 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    102400 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3417995958,,cycles:u,1484879000,100.00,2.302,GHz
2878888230,,instructions:u,1484879000,100.00,0.84,insn per cycle
1484.88,msec,task-clock:u,1484879000,100.00,0.997,CPUs utilized
79882331,,dTLB-load-misses:u,1484879000,100.00,,
15088757,,dTLB-store-misses:u,1484879000,100.00,10.162,M/sec
79882331,,dtlb_load_misses.walk_completed:u,1484879000,100.00,53.797,M/sec
15088757,,dtlb_store_misses.walk_completed:u,1484879000,100.00,10.162,M/sec

[RUN] rep=1, huge=off, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random off
runtime_ms=464.846
gflops=0.215125

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15656304 kB
  MemAvailable:   15594000 kB
  Buffers:             468 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62644 kB
  Inactive:         177884 kB
  Active(anon):       2904 kB
  Inactive(anon):   129992 kB
  Active(file):      59740 kB
  Inactive(file):    47892 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126440 kB
  Mapped:            42756 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76952 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58356 kB
  KernelStack:        4224 kB
  PageTables:         2108 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1082363033,,cycles:u,469484300,100.00,2.305,GHz
2902822846,,instructions:u,469484300,100.00,2.68,insn per cycle
469.48,msec,task-clock:u,469484300,100.00,0.990,CPUs utilized
5543,,dTLB-load-misses:u,469484300,100.00,,
4672,,dTLB-store-misses:u,469484300,100.00,9.951,K/sec
5543,,dtlb_load_misses.walk_completed:u,469484300,100.00,11.807,K/sec
4672,,dtlb_store_misses.walk_completed:u,469484300,100.00,9.951,K/sec

[RUN] rep=1, huge=off, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random off
runtime_ms=612.512
gflops=0.163262

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15655036 kB
  MemAvailable:   15592732 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62628 kB
  Inactive:         178796 kB
  Active(anon):       2888 kB
  Inactive(anon):   130904 kB
  Active(file):      59740 kB
  Inactive(file):    47892 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        127308 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76984 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58388 kB
  KernelStack:        4224 kB
  PageTables:         1956 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1436525239,,cycles:u,618146200,100.00,2.324,GHz
2882604575,,instructions:u,618146200,100.00,2.01,insn per cycle
618.15,msec,task-clock:u,618146200,100.00,0.992,CPUs utilized
11061,,dTLB-load-misses:u,618146200,100.00,,
8621,,dTLB-store-misses:u,618146200,100.00,13.947,K/sec
11061,,dtlb_load_misses.walk_completed:u,618146200,100.00,17.894,K/sec
8621,,dtlb_store_misses.walk_completed:u,618146200,100.00,13.947,K/sec

[RUN] rep=1, huge=on, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random on
runtime_ms=1660.33
gflops=0.0602238

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15589684 kB
  MemAvailable:   15527380 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62636 kB
  Inactive:         242688 kB
  Active(anon):       2896 kB
  Inactive(anon):   194796 kB
  Active(file):      59740 kB
  Inactive(file):    47892 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        191144 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76996 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58400 kB
  KernelStack:        4256 kB
  PageTables:         2208 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    135168 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3866458823,,cycles:u,1701669600,100.00,2.272,GHz
2896076361,,instructions:u,1701669600,100.00,0.75,insn per cycle
1701.67,msec,task-clock:u,1701669600,100.00,0.996,CPUs utilized
83752163,,dTLB-load-misses:u,1701669600,100.00,,
15203158,,dTLB-store-misses:u,1701669600,100.00,8.934,M/sec
83752163,,dtlb_load_misses.walk_completed:u,1701669600,100.00,49.218,M/sec
15203158,,dtlb_store_misses.walk_completed:u,1701669600,100.00,8.934,M/sec

[RUN] rep=1, huge=on, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random on
runtime_ms=1969.62
gflops=0.050742

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15392164 kB
  MemAvailable:   15329864 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         439300 kB
  Active(anon):       2904 kB
  Inactive(anon):   391440 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        387788 kB
  Mapped:            42828 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              77028 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58432 kB
  KernelStack:        4240 kB
  PageTables:         2564 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329308 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    331776 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4677382217,,cycles:u,2164106500,100.00,2.161,GHz
3032597285,,instructions:u,2164106500,100.00,0.65,insn per cycle
2164.11,msec,task-clock:u,2164106500,100.00,0.997,CPUs utilized
85663436,,dTLB-load-misses:u,2164106500,100.00,,
15048152,,dTLB-store-misses:u,2164106500,100.00,6.954,M/sec
85663436,,dtlb_load_misses.walk_completed:u,2164106500,100.00,39.584,M/sec
15048152,,dtlb_store_misses.walk_completed:u,2164106500,100.00,6.954,M/sec

[RUN] rep=1, huge=off, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random off
runtime_ms=1990.31
gflops=0.0502144

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15395396 kB
  MemAvailable:   15333096 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439212 kB
  Active(anon):       2896 kB
  Inactive(anon):   391352 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        387668 kB
  Mapped:            42804 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76900 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58304 kB
  KernelStack:        4240 kB
  PageTables:         2260 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    331776 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4716667617,,cycles:u,2075380400,100.00,2.273,GHz
3032597134,,instructions:u,2075380400,100.00,0.64,insn per cycle
2075.38,msec,task-clock:u,2075380400,100.00,0.997,CPUs utilized
85662436,,dTLB-load-misses:u,2075380400,100.00,,
15034463,,dTLB-store-misses:u,2075380400,100.00,7.244,M/sec
85662436,,dtlb_load_misses.walk_completed:u,2075380400,100.00,41.276,M/sec
15034463,,dtlb_store_misses.walk_completed:u,2075380400,100.00,7.244,M/sec

[RUN] rep=1, huge=on, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random on
runtime_ms=2242.31
gflops=0.0445419

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15132008 kB
  MemAvailable:   15069708 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701448 kB
  Active(anon):       2896 kB
  Inactive(anon):   653588 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        649944 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76900 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58304 kB
  KernelStack:        4224 kB
  PageTables:         3084 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    593920 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5373272401,,cycles:u,2574334200,100.00,2.087,GHz
3471519132,,instructions:u,2574334200,100.00,0.65,insn per cycle
2574.33,msec,task-clock:u,2574334200,100.00,0.998,CPUs utilized
86328279,,dTLB-load-misses:u,2574334200,100.00,,
14792329,,dTLB-store-misses:u,2574334200,100.00,5.746,M/sec
86328279,,dtlb_load_misses.walk_completed:u,2574334200,100.00,33.534,M/sec
14792329,,dtlb_store_misses.walk_completed:u,2574334200,100.00,5.746,M/sec

[RUN] rep=1, huge=on, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random on
runtime_ms=733.177
gflops=0.136392

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15649104 kB
  MemAvailable:   15586804 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         185268 kB
  Active(anon):       2896 kB
  Inactive(anon):   137408 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        133732 kB
  Mapped:            42772 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76900 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58304 kB
  KernelStack:        4224 kB
  PageTables:         2124 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     77824 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1702034320,,cycles:u,740407500,100.00,2.299,GHz
2870115578,,instructions:u,740407500,100.00,1.69,insn per cycle
740.41,msec,task-clock:u,740407500,100.00,0.993,CPUs utilized
10601677,,dTLB-load-misses:u,740407500,100.00,,
6656225,,dTLB-store-misses:u,740407500,100.00,8.990,M/sec
10601677,,dtlb_load_misses.walk_completed:u,740407500,100.00,14.319,M/sec
6656225,,dtlb_store_misses.walk_completed:u,740407500,100.00,8.990,M/sec

[RUN] rep=1, huge=off, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random off
runtime_ms=1788.56
gflops=0.0559063

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15594020 kB
  MemAvailable:   15531720 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         242692 kB
  Active(anon):       2904 kB
  Inactive(anon):   194832 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        191188 kB
  Mapped:            42844 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76864 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58268 kB
  KernelStack:        4224 kB
  PageTables:         2128 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    135168 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3884762146,,cycles:u,1697065600,100.00,2.289,GHz
2896076855,,instructions:u,1697065600,100.00,0.75,insn per cycle
1697.07,msec,task-clock:u,1697065600,100.00,0.933,CPUs utilized
83488719,,dTLB-load-misses:u,1697065600,100.00,,
15122124,,dTLB-store-misses:u,1697065600,100.00,8.911,M/sec
83488719,,dtlb_load_misses.walk_completed:u,1697065600,100.00,49.196,M/sec
15122124,,dtlb_store_misses.walk_completed:u,1697065600,100.00,8.911,M/sec

[RUN] rep=1, huge=off, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random off
runtime_ms=1779.09
gflops=0.0561947

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15526284 kB
  MemAvailable:   15463984 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         308092 kB
  Active(anon):       2888 kB
  Inactive(anon):   260232 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        256504 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76816 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58220 kB
  KernelStack:        4224 kB
  PageTables:         2112 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    200704 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4169017902,,cycles:u,1861231100,100.00,2.240,GHz
2935624168,,instructions:u,1861231100,100.00,0.70,insn per cycle
1861.23,msec,task-clock:u,1861231100,100.00,0.998,CPUs utilized
85021875,,dTLB-load-misses:u,1861231100,100.00,,
15090557,,dTLB-store-misses:u,1861231100,100.00,8.108,M/sec
85021875,,dtlb_load_misses.walk_completed:u,1861231100,100.00,45.680,M/sec
15090557,,dtlb_store_misses.walk_completed:u,1861231100,100.00,8.108,M/sec

[RUN] rep=1, huge=on, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random on
runtime_ms=1782.39
gflops=0.0560906

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15529140 kB
  MemAvailable:   15466840 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         308080 kB
  Active(anon):       2888 kB
  Inactive(anon):   260220 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        256480 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76788 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58192 kB
  KernelStack:        4208 kB
  PageTables:         1896 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    200704 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4180550703,,cycles:u,1828508000,100.00,2.286,GHz
2935624451,,instructions:u,1828508000,100.00,0.70,insn per cycle
1828.51,msec,task-clock:u,1828508000,100.00,0.997,CPUs utilized
84937939,,dTLB-load-misses:u,1828508000,100.00,,
15047167,,dTLB-store-misses:u,1828508000,100.00,8.229,M/sec
84937939,,dtlb_load_misses.walk_completed:u,1828508000,100.00,46.452,M/sec
15047167,,dtlb_store_misses.walk_completed:u,1828508000,100.00,8.229,M/sec

[RUN] rep=1, huge=off, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random off
runtime_ms=2191.8
gflops=0.0455684

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15134148 kB
  MemAvailable:   15071848 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701552 kB
  Active(anon):       2896 kB
  Inactive(anon):   653692 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        650048 kB
  Mapped:            42788 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76856 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58260 kB
  KernelStack:        4224 kB
  PageTables:         3100 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    593920 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5264818563,,cycles:u,2578285900,100.00,2.042,GHz
3471519011,,instructions:u,2578285900,100.00,0.66,insn per cycle
2578.29,msec,task-clock:u,2578285900,100.00,0.998,CPUs utilized
86274357,,dTLB-load-misses:u,2578285900,100.00,,
14828213,,dTLB-store-misses:u,2578285900,100.00,5.751,M/sec
86274357,,dtlb_load_misses.walk_completed:u,2578285900,100.00,33.462,M/sec
14828213,,dtlb_store_misses.walk_completed:u,2578285900,100.00,5.751,M/sec

[RUN] rep=1, huge=on, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random on
runtime_ms=1186.52
gflops=0.0842799

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15643700 kB
  MemAvailable:   15581400 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         193392 kB
  Active(anon):       2888 kB
  Inactive(anon):   145532 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        141796 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76848 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58252 kB
  KernelStack:        4208 kB
  PageTables:         2016 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     86016 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2701730255,,cycles:u,1197458200,100.00,2.256,GHz
2871661722,,instructions:u,1197458200,100.00,1.06,insn per cycle
1197.46,msec,task-clock:u,1197458200,100.00,0.996,CPUs utilized
66469725,,dTLB-load-misses:u,1197458200,100.00,,
13537107,,dTLB-store-misses:u,1197458200,100.00,11.305,M/sec
66469725,,dtlb_load_misses.walk_completed:u,1197458200,100.00,55.509,M/sec
13537107,,dtlb_store_misses.walk_completed:u,1197458200,100.00,11.305,M/sec

[RUN] rep=1, huge=on, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random on
runtime_ms=665.698
gflops=0.150218

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15655108 kB
  MemAvailable:   15592808 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181164 kB
  Active(anon):       2896 kB
  Inactive(anon):   133304 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        129628 kB
  Mapped:            42828 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76896 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58300 kB
  KernelStack:        4224 kB
  PageTables:         2100 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     73728 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1545115386,,cycles:u,671988000,100.00,2.299,GHz
2873260948,,instructions:u,671988000,100.00,1.86,insn per cycle
671.99,msec,task-clock:u,671988000,100.00,0.994,CPUs utilized
53415,,dTLB-load-misses:u,671988000,100.00,,
20289,,dTLB-store-misses:u,671988000,100.00,30.193,K/sec
53415,,dtlb_load_misses.walk_completed:u,671988000,100.00,79.488,K/sec
20289,,dtlb_store_misses.walk_completed:u,671988000,100.00,30.193,K/sec

[RUN] rep=1, huge=off, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random off
runtime_ms=1579.59
gflops=0.0633075

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15626404 kB
  MemAvailable:   15564104 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         209768 kB
  Active(anon):       2896 kB
  Inactive(anon):   161908 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        158204 kB
  Mapped:            42728 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76868 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58272 kB
  KernelStack:        4224 kB
  PageTables:         1940 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    102400 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3399121779,,cycles:u,1471215600,100.00,2.310,GHz
2878888212,,instructions:u,1471215600,100.00,0.85,insn per cycle
1471.22,msec,task-clock:u,1471215600,100.00,0.920,CPUs utilized
79641885,,dTLB-load-misses:u,1471215600,100.00,,
15012263,,dTLB-store-misses:u,1471215600,100.00,10.204,M/sec
79641885,,dtlb_load_misses.walk_completed:u,1471215600,100.00,54.133,M/sec
15012263,,dtlb_store_misses.walk_completed:u,1471215600,100.00,10.204,M/sec

[RUN] rep=1, huge=on, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random on
runtime_ms=2871.32
gflops=0.0347843

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14613460 kB
  MemAvailable:   14551160 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225748 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177888 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:       1174236 kB
  Mapped:            42736 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4224 kB
  PageTables:         3956 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1118208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6973674879,,cycles:u,3794942800,100.00,1.838,GHz
3727997774,,instructions:u,3794942800,100.00,0.53,insn per cycle
3794.94,msec,task-clock:u,3794942800,100.00,0.998,CPUs utilized
87934208,,dTLB-load-misses:u,3794942800,100.00,,
13739669,,dTLB-store-misses:u,3794942800,100.00,3.621,M/sec
87934208,,dtlb_load_misses.walk_completed:u,3794942800,100.00,23.171,M/sec
13739669,,dtlb_store_misses.walk_completed:u,3794942800,100.00,3.621,M/sec

[RUN] rep=1, huge=off, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random off
runtime_ms=677.322
gflops=0.14764

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15652708 kB
  MemAvailable:   15590408 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         185280 kB
  Active(anon):       2896 kB
  Inactive(anon):   137420 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        133736 kB
  Mapped:            42804 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4224 kB
  PageTables:         2176 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     77824 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1589089796,,cycles:u,685024000,100.00,2.320,GHz
2870116147,,instructions:u,685024000,100.00,1.81,insn per cycle
685.02,msec,task-clock:u,685024000,100.00,0.992,CPUs utilized
2271854,,dTLB-load-misses:u,685024000,100.00,,
1502681,,dTLB-store-misses:u,685024000,100.00,2.194,M/sec
2271854,,dtlb_load_misses.walk_completed:u,685024000,100.00,3.316,M/sec
1502681,,dtlb_store_misses.walk_completed:u,685024000,100.00,2.194,M/sec

[RUN] rep=1, huge=off, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random off
runtime_ms=681.739
gflops=0.146683

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15657216 kB
  MemAvailable:   15594916 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181168 kB
  Active(anon):       2896 kB
  Inactive(anon):   133308 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        129624 kB
  Mapped:            42784 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76912 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58316 kB
  KernelStack:        4240 kB
  PageTables:         2096 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     73728 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1585190926,,cycles:u,688029200,100.00,2.304,GHz
2873261395,,instructions:u,688029200,100.00,1.81,insn per cycle
688.03,msec,task-clock:u,688029200,100.00,0.992,CPUs utilized
41348,,dTLB-load-misses:u,688029200,100.00,,
18020,,dTLB-store-misses:u,688029200,100.00,26.191,K/sec
41348,,dtlb_load_misses.walk_completed:u,688029200,100.00,60.096,K/sec
18020,,dtlb_store_misses.walk_completed:u,688029200,100.00,26.191,K/sec

[RUN] rep=1, huge=on, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random on
runtime_ms=810.424
gflops=0.123392

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660928 kB
  MemAvailable:   15598616 kB
  Buffers:             476 kB
  Cached:           109968 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         178904 kB
  Active(anon):       2888 kB
  Inactive(anon):   131072 kB
  Active(file):      59780 kB
  Inactive(file):    47832 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        127388 kB
  Mapped:            42640 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4208 kB
  PageTables:         1880 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1389504321,,cycles:u,602946000,100.00,2.305,GHz
2882604194,,instructions:u,602946000,100.00,2.07,insn per cycle
602.95,msec,task-clock:u,602946000,100.00,0.734,CPUs utilized
34481,,dTLB-load-misses:u,602946000,100.00,,
13713,,dTLB-store-misses:u,602946000,100.00,22.743,K/sec
34481,,dtlb_load_misses.walk_completed:u,602946000,100.00,57.188,K/sec
13713,,dtlb_store_misses.walk_completed:u,602946000,100.00,22.743,K/sec

[RUN] rep=1, huge=off, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random off
runtime_ms=2848.49
gflops=0.0350631

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14611036 kB
  MemAvailable:   14548736 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225744 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177884 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:       1174232 kB
  Mapped:            42780 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76896 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58300 kB
  KernelStack:        4224 kB
  PageTables:         4064 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1118208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6945936752,,cycles:u,3667829200,100.00,1.894,GHz
3727997536,,instructions:u,3667829200,100.00,0.54,insn per cycle
3667.83,msec,task-clock:u,3667829200,100.00,0.999,CPUs utilized
87925207,,dTLB-load-misses:u,3667829200,100.00,,
13742541,,dTLB-store-misses:u,3667829200,100.00,3.747,M/sec
87925207,,dtlb_load_misses.walk_completed:u,3667829200,100.00,23.972,M/sec
13742541,,dtlb_store_misses.walk_completed:u,3667829200,100.00,3.747,M/sec

[RUN] rep=1, huge=on, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random on
runtime_ms=489.165
gflops=0.20443

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662456 kB
  MemAvailable:   15600156 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178104 kB
  Active(anon):       2896 kB
  Inactive(anon):   130244 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                68 kB
  Writeback:             0 kB
  AnonPages:        126592 kB
  Mapped:            42848 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76896 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58300 kB
  KernelStack:        4224 kB
  PageTables:         2176 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1143470123,,cycles:u,493829500,100.00,2.316,GHz
2902812723,,instructions:u,493829500,100.00,2.54,insn per cycle
493.83,msec,task-clock:u,493829500,100.00,0.988,CPUs utilized
12265,,dTLB-load-misses:u,493829500,100.00,,
6329,,dTLB-store-misses:u,493829500,100.00,12.816,K/sec
12265,,dtlb_load_misses.walk_completed:u,493829500,100.00,24.837,K/sec
6329,,dtlb_store_misses.walk_completed:u,493829500,100.00,12.816,K/sec

[RUN] rep=1, huge=on, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random on
runtime_ms=468.363
gflops=0.213509

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15663120 kB
  MemAvailable:   15600820 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177708 kB
  Active(anon):       2896 kB
  Inactive(anon):   129848 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126148 kB
  Mapped:            42824 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76944 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58348 kB
  KernelStack:        4224 kB
  PageTables:         2080 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1094927498,,cycles:u,472663100,100.00,2.317,GHz
2943968788,,instructions:u,472663100,100.00,2.69,insn per cycle
472.66,msec,task-clock:u,472663100,100.00,0.987,CPUs utilized
2869,,dTLB-load-misses:u,472663100,100.00,,
3080,,dTLB-store-misses:u,472663100,100.00,6.516,K/sec
2869,,dtlb_load_misses.walk_completed:u,472663100,100.00,6.070,K/sec
3080,,dtlb_store_misses.walk_completed:u,472663100,100.00,6.516,K/sec

[RUN] rep=1, huge=off, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random off
runtime_ms=1395.99
gflops=0.0716337

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15645252 kB
  MemAvailable:   15582952 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193476 kB
  Active(anon):       2896 kB
  Inactive(anon):   145616 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        141920 kB
  Mapped:            42776 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76936 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58340 kB
  KernelStack:        4240 kB
  PageTables:         2172 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     86016 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2720087069,,cycles:u,1185083500,100.00,2.295,GHz
2871661706,,instructions:u,1185083500,100.00,1.06,insn per cycle
1185.08,msec,task-clock:u,1185083500,100.00,0.839,CPUs utilized
67457862,,dTLB-load-misses:u,1185083500,100.00,,
13788187,,dTLB-store-misses:u,1185083500,100.00,11.635,M/sec
67457862,,dtlb_load_misses.walk_completed:u,1185083500,100.00,56.922,M/sec
13788187,,dtlb_store_misses.walk_completed:u,1185083500,100.00,11.635,M/sec

[RUN] rep=1, huge=off, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
runtime_ms=467.535
gflops=0.213888

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662788 kB
  MemAvailable:   15600488 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177608 kB
  Active(anon):       2896 kB
  Inactive(anon):   129748 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126108 kB
  Mapped:            42920 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76884 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58288 kB
  KernelStack:        4240 kB
  PageTables:         2120 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1095947805,,cycles:u,471812100,100.00,2.323,GHz
2943968862,,instructions:u,471812100,100.00,2.69,insn per cycle
471.81,msec,task-clock:u,471812100,100.00,0.989,CPUs utilized
2961,,dTLB-load-misses:u,471812100,100.00,,
2919,,dTLB-store-misses:u,471812100,100.00,6.187,K/sec
2961,,dtlb_load_misses.walk_completed:u,471812100,100.00,6.276,K/sec
2919,,dtlb_store_misses.walk_completed:u,471812100,100.00,6.187,K/sec

[RUN] rep=2, huge=off, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random off
runtime_ms=1744.69
gflops=0.0573119

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15595776 kB
  MemAvailable:   15533476 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         242788 kB
  Active(anon):       2904 kB
  Inactive(anon):   194928 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191304 kB
  Mapped:            42996 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76912 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58316 kB
  KernelStack:        4256 kB
  PageTables:         2264 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    135168 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3980826465,,cycles:u,1753209500,100.00,2.271,GHz
2896076303,,instructions:u,1753209500,100.00,0.73,insn per cycle
1753.21,msec,task-clock:u,1753209500,100.00,0.978,CPUs utilized
83521207,,dTLB-load-misses:u,1753209500,100.00,,
15059377,,dTLB-store-misses:u,1753209500,100.00,8.590,M/sec
83521207,,dtlb_load_misses.walk_completed:u,1753209500,100.00,47.639,M/sec
15059377,,dtlb_store_misses.walk_completed:u,1753209500,100.00,8.590,M/sec

[RUN] rep=2, huge=on, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random on
runtime_ms=1794.59
gflops=0.0557091

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15530736 kB
  MemAvailable:   15468436 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308152 kB
  Active(anon):       2896 kB
  Inactive(anon):   260292 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256612 kB
  Mapped:            42800 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76892 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58296 kB
  KernelStack:        4240 kB
  PageTables:         2204 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    200704 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4219899825,,cycles:u,1878251800,100.00,2.247,GHz
2935623932,,instructions:u,1878251800,100.00,0.70,insn per cycle
1878.25,msec,task-clock:u,1878251800,100.00,0.997,CPUs utilized
85008527,,dTLB-load-misses:u,1878251800,100.00,,
15084421,,dTLB-store-misses:u,1878251800,100.00,8.031,M/sec
85008527,,dtlb_load_misses.walk_completed:u,1878251800,100.00,45.259,M/sec
15084421,,dtlb_store_misses.walk_completed:u,1878251800,100.00,8.031,M/sec

[RUN] rep=2, huge=off, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random off
runtime_ms=692.684
gflops=0.144366

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15657000 kB
  MemAvailable:   15594700 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181176 kB
  Active(anon):       2896 kB
  Inactive(anon):   133316 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129604 kB
  Mapped:            42636 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76860 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58264 kB
  KernelStack:        4224 kB
  PageTables:         1976 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     73728 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1551050043,,cycles:u,666224200,100.00,2.328,GHz
2873261095,,instructions:u,666224200,100.00,1.85,insn per cycle
666.22,msec,task-clock:u,666224200,100.00,0.943,CPUs utilized
20382,,dTLB-load-misses:u,666224200,100.00,,
12356,,dTLB-store-misses:u,666224200,100.00,18.546,K/sec
20382,,dtlb_load_misses.walk_completed:u,666224200,100.00,30.593,K/sec
12356,,dtlb_store_misses.walk_completed:u,666224200,100.00,18.546,K/sec

[RUN] rep=2, huge=on, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random on
runtime_ms=1152.49
gflops=0.0867687

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15645248 kB
  MemAvailable:   15582948 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62692 kB
  Inactive:         193632 kB
  Active(anon):       2912 kB
  Inactive(anon):   145772 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142148 kB
  Mapped:            42924 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76928 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58332 kB
  KernelStack:        4272 kB
  PageTables:         2232 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     86016 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2700584180,,cycles:u,1168451900,100.00,2.311,GHz
2871660883,,instructions:u,1168451900,100.00,1.06,insn per cycle
1168.45,msec,task-clock:u,1168451900,100.00,0.993,CPUs utilized
67269135,,dTLB-load-misses:u,1168451900,100.00,,
13546191,,dTLB-store-misses:u,1168451900,100.00,11.593,M/sec
67269135,,dtlb_load_misses.walk_completed:u,1168451900,100.00,57.571,M/sec
13546191,,dtlb_store_misses.walk_completed:u,1168451900,100.00,11.593,M/sec

[RUN] rep=2, huge=on, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random on
runtime_ms=716.768
gflops=0.139515

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15653552 kB
  MemAvailable:   15591252 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         185244 kB
  Active(anon):       2904 kB
  Inactive(anon):   137384 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133720 kB
  Mapped:            42720 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76868 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58272 kB
  KernelStack:        4224 kB
  PageTables:         2052 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     77824 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1682762957,,cycles:u,724107300,100.00,2.324,GHz
2870115951,,instructions:u,724107300,100.00,1.71,insn per cycle
724.11,msec,task-clock:u,724107300,100.00,0.991,CPUs utilized
12340343,,dTLB-load-misses:u,724107300,100.00,,
6909626,,dTLB-store-misses:u,724107300,100.00,9.542,M/sec
12340343,,dtlb_load_misses.walk_completed:u,724107300,100.00,17.042,M/sec
6909626,,dtlb_store_misses.walk_completed:u,724107300,100.00,9.542,M/sec

[RUN] rep=2, huge=on, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random on
runtime_ms=667.871
gflops=0.149729

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15657588 kB
  MemAvailable:   15595288 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         181168 kB
  Active(anon):       2904 kB
  Inactive(anon):   133308 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129624 kB
  Mapped:            42896 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76892 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58296 kB
  KernelStack:        4256 kB
  PageTables:         2148 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     73728 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1560213935,,cycles:u,669869300,100.00,2.329,GHz
2873261077,,instructions:u,669869300,100.00,1.84,insn per cycle
669.87,msec,task-clock:u,669869300,100.00,0.986,CPUs utilized
8587,,dTLB-load-misses:u,669869300,100.00,,
9735,,dTLB-store-misses:u,669869300,100.00,14.533,K/sec
8587,,dtlb_load_misses.walk_completed:u,669869300,100.00,12.819,K/sec
9735,,dtlb_store_misses.walk_completed:u,669869300,100.00,14.533,K/sec

[RUN] rep=2, huge=on, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random on
runtime_ms=485.611
gflops=0.205926

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662132 kB
  MemAvailable:   15599832 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177928 kB
  Active(anon):       2896 kB
  Inactive(anon):   130068 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126420 kB
  Mapped:            42916 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76884 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58288 kB
  KernelStack:        4224 kB
  PageTables:         2084 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1136907545,,cycles:u,490188300,100.00,2.319,GHz
2902813053,,instructions:u,490188300,100.00,2.55,insn per cycle
490.19,msec,task-clock:u,490188300,100.00,0.991,CPUs utilized
6013,,dTLB-load-misses:u,490188300,100.00,,
4895,,dTLB-store-misses:u,490188300,100.00,9.986,K/sec
6013,,dtlb_load_misses.walk_completed:u,490188300,100.00,12.267,K/sec
4895,,dtlb_store_misses.walk_completed:u,490188300,100.00,9.986,K/sec

[RUN] rep=2, huge=on, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random on
runtime_ms=1659.64
gflops=0.0602489

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15596740 kB
  MemAvailable:   15534440 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         242708 kB
  Active(anon):       2896 kB
  Inactive(anon):   194848 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191172 kB
  Mapped:            42796 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76880 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58284 kB
  KernelStack:        4240 kB
  PageTables:         2124 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    135168 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3872802480,,cycles:u,1718864400,100.00,2.253,GHz
2896077093,,instructions:u,1718864400,100.00,0.75,insn per cycle
1718.86,msec,task-clock:u,1718864400,100.00,0.996,CPUs utilized
83469385,,dTLB-load-misses:u,1718864400,100.00,,
15132997,,dTLB-store-misses:u,1718864400,100.00,8.804,M/sec
83469385,,dtlb_load_misses.walk_completed:u,1718864400,100.00,48.561,M/sec
15132997,,dtlb_store_misses.walk_completed:u,1718864400,100.00,8.804,M/sec

[RUN] rep=2, huge=on, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random on
runtime_ms=1997.54
gflops=0.0500328

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15399216 kB
  MemAvailable:   15336916 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439276 kB
  Active(anon):       2896 kB
  Inactive(anon):   391416 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387684 kB
  Mapped:            42796 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76888 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58292 kB
  KernelStack:        4240 kB
  PageTables:         2512 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    331776 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4739500538,,cycles:u,2194503700,100.00,2.160,GHz
3032597180,,instructions:u,2194503700,100.00,0.64,insn per cycle
2194.50,msec,task-clock:u,2194503700,100.00,0.997,CPUs utilized
85745086,,dTLB-load-misses:u,2194503700,100.00,,
15036603,,dTLB-store-misses:u,2194503700,100.00,6.852,M/sec
85745086,,dtlb_load_misses.walk_completed:u,2194503700,100.00,39.073,M/sec
15036603,,dtlb_store_misses.walk_completed:u,2194503700,100.00,6.852,M/sec

[RUN] rep=2, huge=on, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random on
runtime_ms=462.422
gflops=0.216253

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15663332 kB
  MemAvailable:   15601020 kB
  Buffers:             476 kB
  Cached:           109968 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         177404 kB
  Active(anon):       2888 kB
  Inactive(anon):   129572 kB
  Active(file):      59780 kB
  Inactive(file):    47832 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        125864 kB
  Mapped:            42648 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76864 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58268 kB
  KernelStack:        4208 kB
  PageTables:         2016 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1085957175,,cycles:u,466870900,100.00,2.326,GHz
2943968781,,instructions:u,466870900,100.00,2.71,insn per cycle
466.87,msec,task-clock:u,466870900,100.00,0.989,CPUs utilized
2740,,dTLB-load-misses:u,466870900,100.00,,
2895,,dTLB-store-misses:u,466870900,100.00,6.201,K/sec
2740,,dtlb_load_misses.walk_completed:u,466870900,100.00,5.869,K/sec
2895,,dtlb_store_misses.walk_completed:u,466870900,100.00,6.201,K/sec

[RUN] rep=2, huge=off, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random off
runtime_ms=2263.24
gflops=0.0441301

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15135520 kB
  MemAvailable:   15073208 kB
  Buffers:             476 kB
  Cached:           109968 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701436 kB
  Active(anon):       2896 kB
  Inactive(anon):   653604 kB
  Active(file):      59780 kB
  Inactive(file):    47832 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        649928 kB
  Mapped:            42716 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76860 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58264 kB
  KernelStack:        4240 kB
  PageTables:         3104 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    593920 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5376877240,,cycles:u,2575151400,100.00,2.088,GHz
3471518994,,instructions:u,2575151400,100.00,0.65,insn per cycle
2575.15,msec,task-clock:u,2575151400,100.00,0.997,CPUs utilized
86348377,,dTLB-load-misses:u,2575151400,100.00,,
14751049,,dTLB-store-misses:u,2575151400,100.00,5.728,M/sec
86348377,,dtlb_load_misses.walk_completed:u,2575151400,100.00,33.531,M/sec
14751049,,dtlb_store_misses.walk_completed:u,2575151400,100.00,5.728,M/sec

[RUN] rep=2, huge=off, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random off
runtime_ms=460.999
gflops=0.21692

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662568 kB
  MemAvailable:   15600268 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177848 kB
  Active(anon):       2896 kB
  Inactive(anon):   129988 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126668 kB
  Mapped:            42808 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76872 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58276 kB
  KernelStack:        4240 kB
  PageTables:         2132 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27512 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1082635324,,cycles:u,465648000,100.00,2.325,GHz
2902822289,,instructions:u,465648000,100.00,2.68,insn per cycle
465.65,msec,task-clock:u,465648000,100.00,0.990,CPUs utilized
3157,,dTLB-load-misses:u,465648000,100.00,,
4080,,dTLB-store-misses:u,465648000,100.00,8.762,K/sec
3157,,dtlb_load_misses.walk_completed:u,465648000,100.00,6.780,K/sec
4080,,dtlb_store_misses.walk_completed:u,465648000,100.00,8.762,K/sec

[RUN] rep=2, huge=on, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random on
runtime_ms=2832.24
gflops=0.0352642

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14612148 kB
  MemAvailable:   14549848 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225748 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177888 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174240 kB
  Mapped:            42764 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76856 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58260 kB
  KernelStack:        4224 kB
  PageTables:         3920 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1118208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6916039818,,cycles:u,3451456800,100.00,2.004,GHz
3727998250,,instructions:u,3451456800,100.00,0.54,insn per cycle
3451.46,msec,task-clock:u,3451456800,100.00,0.998,CPUs utilized
87887736,,dTLB-load-misses:u,3451456800,100.00,,
13808474,,dTLB-store-misses:u,3451456800,100.00,4.001,M/sec
87887736,,dtlb_load_misses.walk_completed:u,3451456800,100.00,25.464,M/sec
13808474,,dtlb_store_misses.walk_completed:u,3451456800,100.00,4.001,M/sec

[RUN] rep=2, huge=off, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random off
runtime_ms=2154.71
gflops=0.0463832

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15399092 kB
  MemAvailable:   15336792 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         439164 kB
  Active(anon):       2888 kB
  Inactive(anon):   391304 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387564 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76824 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58228 kB
  KernelStack:        4208 kB
  PageTables:         2388 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    331776 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4671366743,,cycles:u,2049489800,100.00,2.279,GHz
3032597128,,instructions:u,2049489800,100.00,0.65,insn per cycle
2049.49,msec,task-clock:u,2049489800,100.00,0.912,CPUs utilized
85693778,,dTLB-load-misses:u,2049489800,100.00,,
14977159,,dTLB-store-misses:u,2049489800,100.00,7.308,M/sec
85693778,,dtlb_load_misses.walk_completed:u,2049489800,100.00,41.812,M/sec
14977159,,dtlb_store_misses.walk_completed:u,2049489800,100.00,7.308,M/sec

[RUN] rep=2, huge=on, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random on
runtime_ms=1479.03
gflops=0.0676118

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15628480 kB
  MemAvailable:   15566180 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         209784 kB
  Active(anon):       2888 kB
  Inactive(anon):   161924 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158184 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76808 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58212 kB
  KernelStack:        4208 kB
  PageTables:         2148 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    102400 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3436808281,,cycles:u,1493572400,100.00,2.301,GHz
2878888544,,instructions:u,1493572400,100.00,0.84,insn per cycle
1493.57,msec,task-clock:u,1493572400,100.00,0.995,CPUs utilized
79385653,,dTLB-load-misses:u,1493572400,100.00,,
14955111,,dTLB-store-misses:u,1493572400,100.00,10.013,M/sec
79385653,,dtlb_load_misses.walk_completed:u,1493572400,100.00,53.152,M/sec
14955111,,dtlb_store_misses.walk_completed:u,1493572400,100.00,10.013,M/sec

[RUN] rep=2, huge=off, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random off
runtime_ms=1804.6
gflops=0.0554002

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15532316 kB
  MemAvailable:   15470016 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308256 kB
  Active(anon):       2896 kB
  Inactive(anon):   260396 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256712 kB
  Mapped:            42736 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76788 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58192 kB
  KernelStack:        4240 kB
  PageTables:         2200 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    200704 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4166217138,,cycles:u,1819241000,100.00,2.290,GHz
2935624047,,instructions:u,1819241000,100.00,0.70,insn per cycle
1819.24,msec,task-clock:u,1819241000,100.00,0.979,CPUs utilized
85116886,,dTLB-load-misses:u,1819241000,100.00,,
15101477,,dTLB-store-misses:u,1819241000,100.00,8.301,M/sec
85116886,,dtlb_load_misses.walk_completed:u,1819241000,100.00,46.787,M/sec
15101477,,dtlb_store_misses.walk_completed:u,1819241000,100.00,8.301,M/sec

[RUN] rep=2, huge=off, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
runtime_ms=467.641
gflops=0.213839

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662472 kB
  MemAvailable:   15600172 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         177588 kB
  Active(anon):       2888 kB
  Inactive(anon):   129728 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126024 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76776 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58180 kB
  KernelStack:        4224 kB
  PageTables:         1892 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1097849798,,cycles:u,472156500,100.00,2.325,GHz
2943969117,,instructions:u,472156500,100.00,2.68,insn per cycle
472.16,msec,task-clock:u,472156500,100.00,0.985,CPUs utilized
3146,,dTLB-load-misses:u,472156500,100.00,,
2914,,dTLB-store-misses:u,472156500,100.00,6.172,K/sec
3146,,dtlb_load_misses.walk_completed:u,472156500,100.00,6.663,K/sec
2914,,dtlb_store_misses.walk_completed:u,472156500,100.00,6.172,K/sec

[RUN] rep=2, huge=off, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random off
runtime_ms=700.104
gflops=0.142835

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15650144 kB
  MemAvailable:   15587844 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         185280 kB
  Active(anon):       2896 kB
  Inactive(anon):   137420 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133740 kB
  Mapped:            42716 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76796 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58200 kB
  KernelStack:        4224 kB
  PageTables:         2068 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     77824 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1644520254,,cycles:u,707758100,100.00,2.324,GHz
2870116310,,instructions:u,707758100,100.00,1.75,insn per cycle
707.76,msec,task-clock:u,707758100,100.00,0.994,CPUs utilized
12185172,,dTLB-load-misses:u,707758100,100.00,,
7136121,,dTLB-store-misses:u,707758100,100.00,10.083,M/sec
12185172,,dtlb_load_misses.walk_completed:u,707758100,100.00,17.217,M/sec
7136121,,dtlb_store_misses.walk_completed:u,707758100,100.00,10.083,M/sec

[RUN] rep=2, huge=off, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random off
runtime_ms=614.546
gflops=0.162721

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661336 kB
  MemAvailable:   15599036 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         178840 kB
  Active(anon):       2888 kB
  Inactive(anon):   130980 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127244 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76792 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58196 kB
  KernelStack:        4224 kB
  PageTables:         2020 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     71680 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1443180487,,cycles:u,620084600,100.00,2.327,GHz
2882613668,,instructions:u,620084600,100.00,2.00,insn per cycle
620.08,msec,task-clock:u,620084600,100.00,0.993,CPUs utilized
3658,,dTLB-load-misses:u,620084600,100.00,,
6962,,dTLB-store-misses:u,620084600,100.00,11.228,K/sec
3658,,dtlb_load_misses.walk_completed:u,620084600,100.00,5.899,K/sec
6962,,dtlb_store_misses.walk_completed:u,620084600,100.00,11.228,K/sec

[RUN] rep=2, huge=on, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random on
runtime_ms=2238.05
gflops=0.0446267

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15136008 kB
  MemAvailable:   15073708 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62692 kB
  Inactive:         701528 kB
  Active(anon):       2912 kB
  Inactive(anon):   653668 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650080 kB
  Mapped:            43052 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76788 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58192 kB
  KernelStack:        4240 kB
  PageTables:         3192 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    593920 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5324360245,,cycles:u,2626633600,100.00,2.027,GHz
3471519240,,instructions:u,2626633600,100.00,0.65,insn per cycle
2626.63,msec,task-clock:u,2626633600,100.00,0.997,CPUs utilized
86307110,,dTLB-load-misses:u,2626633600,100.00,,
14794140,,dTLB-store-misses:u,2626633600,100.00,5.632,M/sec
86307110,,dtlb_load_misses.walk_completed:u,2626633600,100.00,32.858,M/sec
14794140,,dtlb_store_misses.walk_completed:u,2626633600,100.00,5.632,M/sec

[RUN] rep=2, huge=off, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random off
runtime_ms=1474.11
gflops=0.0678372

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15628380 kB
  MemAvailable:   15566080 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         209924 kB
  Active(anon):       2896 kB
  Inactive(anon):   162064 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158332 kB
  Mapped:            42864 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76780 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58184 kB
  KernelStack:        4240 kB
  PageTables:         2116 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099932 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    112640 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3443767876,,cycles:u,1489134500,100.00,2.313,GHz
2878888187,,instructions:u,1489134500,100.00,0.84,insn per cycle
1489.13,msec,task-clock:u,1489134500,100.00,0.995,CPUs utilized
79695487,,dTLB-load-misses:u,1489134500,100.00,,
14871354,,dTLB-store-misses:u,1489134500,100.00,9.987,M/sec
79695487,,dtlb_load_misses.walk_completed:u,1489134500,100.00,53.518,M/sec
14871354,,dtlb_store_misses.walk_completed:u,1489134500,100.00,9.987,M/sec

[RUN] rep=2, huge=off, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random off
runtime_ms=2834.69
gflops=0.0352338

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14611392 kB
  MemAvailable:   14549092 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225768 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177908 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174260 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76804 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58208 kB
  KernelStack:        4240 kB
  PageTables:         3816 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1128448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6923541676,,cycles:u,3868769700,100.00,1.790,GHz
3727996960,,instructions:u,3868769700,100.00,0.54,insn per cycle
3868.77,msec,task-clock:u,3868769700,100.00,0.999,CPUs utilized
87934220,,dTLB-load-misses:u,3868769700,100.00,,
13789593,,dTLB-store-misses:u,3868769700,100.00,3.564,M/sec
87934220,,dtlb_load_misses.walk_completed:u,3868769700,100.00,22.729,M/sec
13789593,,dtlb_store_misses.walk_completed:u,3868769700,100.00,3.564,M/sec

[RUN] rep=2, huge=on, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random on
runtime_ms=576.979
gflops=0.173316

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661304 kB
  MemAvailable:   15599004 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         179100 kB
  Active(anon):       2896 kB
  Inactive(anon):   131240 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127592 kB
  Mapped:            42772 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76804 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58208 kB
  KernelStack:        4240 kB
  PageTables:         2176 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     81920 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1353972589,,cycles:u,582663900,100.00,2.324,GHz
2882613570,,instructions:u,582663900,100.00,2.13,insn per cycle
582.66,msec,task-clock:u,582663900,100.00,0.988,CPUs utilized
5463,,dTLB-load-misses:u,582663900,100.00,,
7123,,dTLB-store-misses:u,582663900,100.00,12.225,K/sec
5463,,dtlb_load_misses.walk_completed:u,582663900,100.00,9.376,K/sec
7123,,dtlb_store_misses.walk_completed:u,582663900,100.00,12.225,K/sec

[RUN] rep=2, huge=off, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random off
runtime_ms=1183.83
gflops=0.0844717

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15644308 kB
  MemAvailable:   15582008 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193488 kB
  Active(anon):       2896 kB
  Inactive(anon):   145628 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        141948 kB
  Mapped:            42856 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76812 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58216 kB
  KernelStack:        4256 kB
  PageTables:         2080 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2774964471,,cycles:u,1193469300,100.00,2.325,GHz
2871661219,,instructions:u,1193469300,100.00,1.03,insn per cycle
1193.47,msec,task-clock:u,1193469300,100.00,0.995,CPUs utilized
67310229,,dTLB-load-misses:u,1193469300,100.00,,
13298161,,dTLB-store-misses:u,1193469300,100.00,11.142,M/sec
67310229,,dtlb_load_misses.walk_completed:u,1193469300,100.00,56.399,M/sec
13298161,,dtlb_store_misses.walk_completed:u,1193469300,100.00,11.142,M/sec

[RUN] rep=3, huge=off, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random off
runtime_ms=2838.44
gflops=0.0351873

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14609324 kB
  MemAvailable:   14547024 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:        1225764 kB
  Active(anon):       2904 kB
  Inactive(anon):  1177904 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174256 kB
  Mapped:            42904 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76820 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58224 kB
  KernelStack:        4256 kB
  PageTables:         4092 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1128448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6945900482,,cycles:u,3276525600,100.00,2.120,GHz
3727997820,,instructions:u,3276525600,100.00,0.54,insn per cycle
3276.53,msec,task-clock:u,3276525600,100.00,0.984,CPUs utilized
87929066,,dTLB-load-misses:u,3276525600,100.00,,
13748312,,dTLB-store-misses:u,3276525600,100.00,4.196,M/sec
87929066,,dtlb_load_misses.walk_completed:u,3276525600,100.00,26.836,M/sec
13748312,,dtlb_store_misses.walk_completed:u,3276525600,100.00,4.196,M/sec

[RUN] rep=3, huge=off, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random off
runtime_ms=2214.36
gflops=0.0451041

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15135600 kB
  MemAvailable:   15073300 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         701384 kB
  Active(anon):       2888 kB
  Inactive(anon):   653524 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        649784 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76812 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58216 kB
  KernelStack:        4224 kB
  PageTables:         2716 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    612352 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5279290559,,cycles:u,2383777000,100.00,2.215,GHz
3471518807,,instructions:u,2383777000,100.00,0.66,insn per cycle
2383.78,msec,task-clock:u,2383777000,100.00,0.998,CPUs utilized
86394052,,dTLB-load-misses:u,2383777000,100.00,,
14846440,,dTLB-store-misses:u,2383777000,100.00,6.228,M/sec
86394052,,dtlb_load_misses.walk_completed:u,2383777000,100.00,36.243,M/sec
14846440,,dtlb_store_misses.walk_completed:u,2383777000,100.00,6.228,M/sec

[RUN] rep=3, huge=on, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random on
runtime_ms=1497.22
gflops=0.0667902

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15627528 kB
  MemAvailable:   15565228 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         209864 kB
  Active(anon):       2888 kB
  Inactive(anon):   162004 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158264 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76788 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58192 kB
  KernelStack:        4224 kB
  PageTables:         2016 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    120832 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3495351945,,cycles:u,1512342700,100.00,2.311,GHz
2878888170,,instructions:u,1512342700,100.00,0.82,insn per cycle
1512.34,msec,task-clock:u,1512342700,100.00,0.997,CPUs utilized
79354233,,dTLB-load-misses:u,1512342700,100.00,,
14760716,,dTLB-store-misses:u,1512342700,100.00,9.760,M/sec
79354233,,dtlb_load_misses.walk_completed:u,1512342700,100.00,52.471,M/sec
14760716,,dtlb_store_misses.walk_completed:u,1512342700,100.00,9.760,M/sec

[RUN] rep=3, huge=off, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random off
runtime_ms=794.538
gflops=0.125859

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15656540 kB
  MemAvailable:   15594240 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181260 kB
  Active(anon):       2896 kB
  Inactive(anon):   133400 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129712 kB
  Mapped:            42864 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76804 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58208 kB
  KernelStack:        4240 kB
  PageTables:         2132 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     92160 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1560117208,,cycles:u,672191800,100.00,2.321,GHz
2873260903,,instructions:u,672191800,100.00,1.84,insn per cycle
672.19,msec,task-clock:u,672191800,100.00,0.834,CPUs utilized
7695,,dTLB-load-misses:u,672191800,100.00,,
10039,,dTLB-store-misses:u,672191800,100.00,14.935,K/sec
7695,,dtlb_load_misses.walk_completed:u,672191800,100.00,11.448,K/sec
10039,,dtlb_store_misses.walk_completed:u,672191800,100.00,14.935,K/sec

[RUN] rep=3, huge=off, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random off
runtime_ms=700.796
gflops=0.142695

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15652360 kB
  MemAvailable:   15590060 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         185288 kB
  Active(anon):       2888 kB
  Inactive(anon):   137428 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133688 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76800 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58204 kB
  KernelStack:        4240 kB
  PageTables:         1968 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1638771368,,cycles:u,709529800,100.00,2.310,GHz
2870115826,,instructions:u,709529800,100.00,1.75,insn per cycle
709.53,msec,task-clock:u,709529800,100.00,0.990,CPUs utilized
10894687,,dTLB-load-misses:u,709529800,100.00,,
6590755,,dTLB-store-misses:u,709529800,100.00,9.289,M/sec
10894687,,dtlb_load_misses.walk_completed:u,709529800,100.00,15.355,M/sec
6590755,,dtlb_store_misses.walk_completed:u,709529800,100.00,9.289,M/sec

[RUN] rep=3, huge=off, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random off
runtime_ms=1712.75
gflops=0.0583807

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15597492 kB
  MemAvailable:   15535192 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         242804 kB
  Active(anon):       2896 kB
  Inactive(anon):   194944 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191260 kB
  Mapped:            42792 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76840 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58244 kB
  KernelStack:        4256 kB
  PageTables:         2160 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    153600 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3994610671,,cycles:u,1777107500,100.00,2.248,GHz
2896076329,,instructions:u,1777107500,100.00,0.72,insn per cycle
1777.11,msec,task-clock:u,1777107500,100.00,0.997,CPUs utilized
83532652,,dTLB-load-misses:u,1777107500,100.00,,
14909734,,dTLB-store-misses:u,1777107500,100.00,8.390,M/sec
83532652,,dtlb_load_misses.walk_completed:u,1777107500,100.00,47.005,M/sec
14909734,,dtlb_store_misses.walk_completed:u,1777107500,100.00,8.390,M/sec

[RUN] rep=3, huge=on, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random on
runtime_ms=1808.57
gflops=0.0552786

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15528772 kB
  MemAvailable:   15466472 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308156 kB
  Active(anon):       2896 kB
  Inactive(anon):   260296 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256588 kB
  Mapped:            42728 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76816 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58220 kB
  KernelStack:        4240 kB
  PageTables:         2064 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    219136 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4227975424,,cycles:u,1892079500,100.00,2.235,GHz
2935624021,,instructions:u,1892079500,100.00,0.69,insn per cycle
1892.08,msec,task-clock:u,1892079500,100.00,0.998,CPUs utilized
84945310,,dTLB-load-misses:u,1892079500,100.00,,
15032242,,dTLB-store-misses:u,1892079500,100.00,7.945,M/sec
84945310,,dtlb_load_misses.walk_completed:u,1892079500,100.00,44.895,M/sec
15032242,,dtlb_store_misses.walk_completed:u,1892079500,100.00,7.945,M/sec

[RUN] rep=3, huge=off, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random off
runtime_ms=1795.33
gflops=0.0556864

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15528392 kB
  MemAvailable:   15466092 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308328 kB
  Active(anon):       2896 kB
  Inactive(anon):   260468 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256816 kB
  Mapped:            42784 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76804 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58208 kB
  KernelStack:        4240 kB
  PageTables:         2112 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    219136 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4239368285,,cycles:u,1846095400,100.00,2.296,GHz
2935623990,,instructions:u,1846095400,100.00,0.69,insn per cycle
1846.10,msec,task-clock:u,1846095400,100.00,0.996,CPUs utilized
85100109,,dTLB-load-misses:u,1846095400,100.00,,
15045363,,dTLB-store-misses:u,1846095400,100.00,8.150,M/sec
85100109,,dtlb_load_misses.walk_completed:u,1846095400,100.00,46.097,M/sec
15045363,,dtlb_store_misses.walk_completed:u,1846095400,100.00,8.150,M/sec

[RUN] rep=3, huge=off, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random off
runtime_ms=496.069
gflops=0.201585

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661428 kB
  MemAvailable:   15599128 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         177984 kB
  Active(anon):       2904 kB
  Inactive(anon):   130124 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126764 kB
  Mapped:            42740 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76804 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58208 kB
  KernelStack:        4256 kB
  PageTables:         2096 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1150257533,,cycles:u,502966200,100.00,2.287,GHz
2902813096,,instructions:u,502966200,100.00,2.52,insn per cycle
502.97,msec,task-clock:u,502966200,100.00,0.988,CPUs utilized
4459,,dTLB-load-misses:u,502966200,100.00,,
3658,,dTLB-store-misses:u,502966200,100.00,7.273,K/sec
4459,,dtlb_load_misses.walk_completed:u,502966200,100.00,8.865,K/sec
3658,,dtlb_store_misses.walk_completed:u,502966200,100.00,7.273,K/sec

[RUN] rep=3, huge=off, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random off
runtime_ms=1499.2
gflops=0.0667019

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15627188 kB
  MemAvailable:   15564888 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         209932 kB
  Active(anon):       2896 kB
  Inactive(anon):   162072 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158392 kB
  Mapped:            42872 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76760 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58164 kB
  KernelStack:        4240 kB
  PageTables:         2056 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    120832 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3438355425,,cycles:u,1487869800,100.00,2.311,GHz
2878888524,,instructions:u,1487869800,100.00,0.84,insn per cycle
1487.87,msec,task-clock:u,1487869800,100.00,0.977,CPUs utilized
79262184,,dTLB-load-misses:u,1487869800,100.00,,
14855538,,dTLB-store-misses:u,1487869800,100.00,9.984,M/sec
79262184,,dtlb_load_misses.walk_completed:u,1487869800,100.00,53.272,M/sec
14855538,,dtlb_store_misses.walk_completed:u,1487869800,100.00,9.984,M/sec

[RUN] rep=3, huge=off, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random off
runtime_ms=1971.9
gflops=0.0506834

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15398220 kB
  MemAvailable:   15335920 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439400 kB
  Active(anon):       2896 kB
  Inactive(anon):   391540 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387888 kB
  Mapped:            42808 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76776 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58180 kB
  KernelStack:        4240 kB
  PageTables:         2304 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    350208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4685467365,,cycles:u,2181830600,100.00,2.147,GHz
3032597008,,instructions:u,2181830600,100.00,0.65,insn per cycle
2181.83,msec,task-clock:u,2181830600,100.00,0.997,CPUs utilized
85723033,,dTLB-load-misses:u,2181830600,100.00,,
14991947,,dTLB-store-misses:u,2181830600,100.00,6.871,M/sec
85723033,,dtlb_load_misses.walk_completed:u,2181830600,100.00,39.289,M/sec
14991947,,dtlb_store_misses.walk_completed:u,2181830600,100.00,6.871,M/sec

[RUN] rep=3, huge=on, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random on
runtime_ms=2817.99
gflops=0.0354426

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14609492 kB
  MemAvailable:   14547192 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225664 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177804 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174096 kB
  Mapped:            42728 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76784 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58188 kB
  KernelStack:        4240 kB
  PageTables:         3728 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1136640 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6884401027,,cycles:u,3602685100,100.00,1.911,GHz
3727997187,,instructions:u,3602685100,100.00,0.54,insn per cycle
3602.69,msec,task-clock:u,3602685100,100.00,0.999,CPUs utilized
87901952,,dTLB-load-misses:u,3602685100,100.00,,
13789787,,dTLB-store-misses:u,3602685100,100.00,3.828,M/sec
87901952,,dtlb_load_misses.walk_completed:u,3602685100,100.00,24.399,M/sec
13789787,,dtlb_store_misses.walk_completed:u,3602685100,100.00,3.828,M/sec

[RUN] rep=3, huge=on, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random on
runtime_ms=2167.03
gflops=0.0461196

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15395532 kB
  MemAvailable:   15333232 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439308 kB
  Active(anon):       2896 kB
  Inactive(anon):   391448 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387768 kB
  Mapped:            42800 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76792 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58196 kB
  KernelStack:        4256 kB
  PageTables:         2508 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    350208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4700749176,,cycles:u,2063268500,100.00,2.278,GHz
3032597085,,instructions:u,2063268500,100.00,0.65,insn per cycle
2063.27,msec,task-clock:u,2063268500,100.00,0.912,CPUs utilized
85674034,,dTLB-load-misses:u,2063268500,100.00,,
15001327,,dTLB-store-misses:u,2063268500,100.00,7.271,M/sec
85674034,,dtlb_load_misses.walk_completed:u,2063268500,100.00,41.523,M/sec
15001327,,dtlb_store_misses.walk_completed:u,2063268500,100.00,7.271,M/sec

[RUN] rep=3, huge=off, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random off
runtime_ms=600.606
gflops=0.166498

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660300 kB
  MemAvailable:   15598000 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62660 kB
  Inactive:         179028 kB
  Active(anon):       2880 kB
  Inactive(anon):   131168 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127452 kB
  Mapped:            42620 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76780 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58184 kB
  KernelStack:        4240 kB
  PageTables:         1912 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1409844100,,cycles:u,606349600,100.00,2.325,GHz
2882604300,,instructions:u,606349600,100.00,2.04,insn per cycle
606.35,msec,task-clock:u,606349600,100.00,0.992,CPUs utilized
13795,,dTLB-load-misses:u,606349600,100.00,,
8898,,dTLB-store-misses:u,606349600,100.00,14.675,K/sec
13795,,dtlb_load_misses.walk_completed:u,606349600,100.00,22.751,K/sec
8898,,dtlb_store_misses.walk_completed:u,606349600,100.00,14.675,K/sec

[RUN] rep=3, huge=on, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random on
runtime_ms=497.391
gflops=0.201049

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661624 kB
  MemAvailable:   15599324 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         178364 kB
  Active(anon):       2888 kB
  Inactive(anon):   130504 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126836 kB
  Mapped:            42316 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76772 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58176 kB
  KernelStack:        4256 kB
  PageTables:         1896 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1164237201,,cycles:u,502500100,100.00,2.317,GHz
2902822332,,instructions:u,502500100,100.00,2.49,insn per cycle
502.50,msec,task-clock:u,502500100,100.00,0.989,CPUs utilized
3249,,dTLB-load-misses:u,502500100,100.00,,
4234,,dTLB-store-misses:u,502500100,100.00,8.426,K/sec
3249,,dtlb_load_misses.walk_completed:u,502500100,100.00,6.466,K/sec
4234,,dtlb_store_misses.walk_completed:u,502500100,100.00,8.426,K/sec

[RUN] rep=3, huge=off, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random off
runtime_ms=1340.59
gflops=0.0745938

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15643768 kB
  MemAvailable:   15581468 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193548 kB
  Active(anon):       2896 kB
  Inactive(anon):   145688 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142008 kB
  Mapped:            43020 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76768 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58172 kB
  KernelStack:        4256 kB
  PageTables:         2064 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    104448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2958930844,,cycles:u,1285155100,100.00,2.302,GHz
2874218793,,instructions:u,1285155100,100.00,0.97,insn per cycle
1285.16,msec,task-clock:u,1285155100,100.00,0.947,CPUs utilized
67877829,,dTLB-load-misses:u,1285155100,100.00,,
13414354,,dTLB-store-misses:u,1285155100,100.00,10.438,M/sec
67877829,,dtlb_load_misses.walk_completed:u,1285155100,100.00,52.817,M/sec
13414354,,dtlb_store_misses.walk_completed:u,1285155100,100.00,10.438,M/sec

[RUN] rep=3, huge=on, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random on
runtime_ms=605.643
gflops=0.165113

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660568 kB
  MemAvailable:   15598268 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178992 kB
  Active(anon):       2896 kB
  Inactive(anon):   131132 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127480 kB
  Mapped:            42892 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76772 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58176 kB
  KernelStack:        4240 kB
  PageTables:         2108 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1418225376,,cycles:u,610880400,100.00,2.322,GHz
2882604005,,instructions:u,610880400,100.00,2.03,insn per cycle
610.88,msec,task-clock:u,610880400,100.00,0.990,CPUs utilized
10762,,dTLB-load-misses:u,610880400,100.00,,
8324,,dTLB-store-misses:u,610880400,100.00,13.626,K/sec
10762,,dtlb_load_misses.walk_completed:u,610880400,100.00,17.617,K/sec
8324,,dtlb_store_misses.walk_completed:u,610880400,100.00,13.626,K/sec

[RUN] rep=3, huge=on, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random on
runtime_ms=668.883
gflops=0.149503

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15656152 kB
  MemAvailable:   15593852 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         181180 kB
  Active(anon):       2888 kB
  Inactive(anon):   133320 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129580 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76768 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58172 kB
  KernelStack:        4224 kB
  PageTables:         1964 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     92160 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1567343375,,cycles:u,675304100,100.00,2.321,GHz
2873260749,,instructions:u,675304100,100.00,1.83,insn per cycle
675.30,msec,task-clock:u,675304100,100.00,0.991,CPUs utilized
20899,,dTLB-load-misses:u,675304100,100.00,,
11846,,dTLB-store-misses:u,675304100,100.00,17.542,K/sec
20899,,dtlb_load_misses.walk_completed:u,675304100,100.00,30.948,K/sec
11846,,dtlb_store_misses.walk_completed:u,675304100,100.00,17.542,K/sec

[RUN] rep=3, huge=on, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random on
runtime_ms=688.916
gflops=0.145155

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15652584 kB
  MemAvailable:   15590284 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         185352 kB
  Active(anon):       2904 kB
  Inactive(anon):   137492 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133808 kB
  Mapped:            42952 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76840 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58244 kB
  KernelStack:        4272 kB
  PageTables:         2116 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1609632437,,cycles:u,693361600,100.00,2.321,GHz
2870115952,,instructions:u,693361600,100.00,1.78,insn per cycle
693.36,msec,task-clock:u,693361600,100.00,0.986,CPUs utilized
17430482,,dTLB-load-misses:u,693361600,100.00,,
8364383,,dTLB-store-misses:u,693361600,100.00,12.064,M/sec
17430482,,dtlb_load_misses.walk_completed:u,693361600,100.00,25.139,M/sec
8364383,,dtlb_store_misses.walk_completed:u,693361600,100.00,12.064,M/sec

[RUN] rep=3, huge=on, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random on
runtime_ms=465.309
gflops=0.214911

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661664 kB
  MemAvailable:   15599364 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         177676 kB
  Active(anon):       2904 kB
  Inactive(anon):   129816 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126192 kB
  Mapped:            42892 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76800 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58204 kB
  KernelStack:        4256 kB
  PageTables:         2060 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1090426562,,cycles:u,469868500,100.00,2.321,GHz
2943958693,,instructions:u,469868500,100.00,2.70,insn per cycle
469.87,msec,task-clock:u,469868500,100.00,0.989,CPUs utilized
3237,,dTLB-load-misses:u,469868500,100.00,,
2917,,dTLB-store-misses:u,469868500,100.00,6.208,K/sec
3237,,dtlb_load_misses.walk_completed:u,469868500,100.00,6.889,K/sec
2917,,dtlb_store_misses.walk_completed:u,469868500,100.00,6.208,K/sec

[RUN] rep=3, huge=off, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
runtime_ms=465.051
gflops=0.21503

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15661396 kB
  MemAvailable:   15599096 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         177592 kB
  Active(anon):       2904 kB
  Inactive(anon):   129732 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126140 kB
  Mapped:            42780 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76824 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58228 kB
  KernelStack:        4256 kB
  PageTables:         2144 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1091982490,,cycles:u,469514300,100.00,2.326,GHz
2943968574,,instructions:u,469514300,100.00,2.70,insn per cycle
469.51,msec,task-clock:u,469514300,100.00,0.985,CPUs utilized
2782,,dTLB-load-misses:u,469514300,100.00,,
2846,,dTLB-store-misses:u,469514300,100.00,6.062,K/sec
2782,,dtlb_load_misses.walk_completed:u,469514300,100.00,5.925,K/sec
2846,,dtlb_store_misses.walk_completed:u,469514300,100.00,6.062,K/sec

[RUN] rep=3, huge=on, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random on
runtime_ms=1668.19
gflops=0.0599402

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15596436 kB
  MemAvailable:   15534136 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62692 kB
  Inactive:         242792 kB
  Active(anon):       2912 kB
  Inactive(anon):   194932 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191284 kB
  Mapped:            42880 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76828 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58232 kB
  KernelStack:        4272 kB
  PageTables:         2144 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    153600 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3903421691,,cycles:u,1726183900,100.00,2.261,GHz
2896076687,,instructions:u,1726183900,100.00,0.74,insn per cycle
1726.18,msec,task-clock:u,1726183900,100.00,0.995,CPUs utilized
83346684,,dTLB-load-misses:u,1726183900,100.00,,
15028814,,dTLB-store-misses:u,1726183900,100.00,8.706,M/sec
83346684,,dtlb_load_misses.walk_completed:u,1726183900,100.00,48.284,M/sec
15028814,,dtlb_store_misses.walk_completed:u,1726183900,100.00,8.706,M/sec

[RUN] rep=3, huge=on, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random on
runtime_ms=2257.74
gflops=0.0442375

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15135248 kB
  MemAvailable:   15072948 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         701616 kB
  Active(anon):       2904 kB
  Inactive(anon):   653756 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650132 kB
  Mapped:            42968 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76848 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58252 kB
  KernelStack:        4272 kB
  PageTables:         3044 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    612352 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5413833842,,cycles:u,2683996100,100.00,2.017,GHz
3471519151,,instructions:u,2683996100,100.00,0.64,insn per cycle
2684.00,msec,task-clock:u,2683996100,100.00,0.997,CPUs utilized
86401924,,dTLB-load-misses:u,2683996100,100.00,,
14722683,,dTLB-store-misses:u,2683996100,100.00,5.485,M/sec
86401924,,dtlb_load_misses.walk_completed:u,2683996100,100.00,32.192,M/sec
14722683,,dtlb_store_misses.walk_completed:u,2683996100,100.00,5.485,M/sec

[RUN] rep=3, huge=on, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random on
runtime_ms=1216.44
gflops=0.0822067

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15644168 kB
  MemAvailable:   15581868 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193596 kB
  Active(anon):       2896 kB
  Inactive(anon):   145736 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142004 kB
  Mapped:            42836 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76824 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58228 kB
  KernelStack:        4256 kB
  PageTables:         2136 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    104448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2842709414,,cycles:u,1226142300,100.00,2.318,GHz
2871661924,,instructions:u,1226142300,100.00,1.01,insn per cycle
1226.14,msec,task-clock:u,1226142300,100.00,0.996,CPUs utilized
68271919,,dTLB-load-misses:u,1226142300,100.00,,
13648599,,dTLB-store-misses:u,1226142300,100.00,11.131,M/sec
68271919,,dtlb_load_misses.walk_completed:u,1226142300,100.00,55.680,M/sec
13648599,,dtlb_store_misses.walk_completed:u,1226142300,100.00,11.131,M/sec

[RUN] rep=4, huge=off, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random off
runtime_ms=680.359
gflops=0.146981

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15656196 kB
  MemAvailable:   15593896 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181260 kB
  Active(anon):       2896 kB
  Inactive(anon):   133400 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129716 kB
  Mapped:            42856 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76796 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58200 kB
  KernelStack:        4256 kB
  PageTables:         2096 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     92160 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1596397679,,cycles:u,686817100,100.00,2.324,GHz
2873260674,,instructions:u,686817100,100.00,1.80,insn per cycle
686.82,msec,task-clock:u,686817100,100.00,0.992,CPUs utilized
29205,,dTLB-load-misses:u,686817100,100.00,,
13498,,dTLB-store-misses:u,686817100,100.00,19.653,K/sec
29205,,dtlb_load_misses.walk_completed:u,686817100,100.00,42.522,K/sec
13498,,dtlb_store_misses.walk_completed:u,686817100,100.00,19.653,K/sec

[RUN] rep=4, huge=off, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random off
runtime_ms=1981.21
gflops=0.050445

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15397208 kB
  MemAvailable:   15334908 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         439400 kB
  Active(anon):       2888 kB
  Inactive(anon):   391540 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387892 kB
  Mapped:            42760 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76800 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58204 kB
  KernelStack:        4240 kB
  PageTables:         2372 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    350208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4711662480,,cycles:u,2125723100,100.00,2.216,GHz
3032606888,,instructions:u,2125723100,100.00,0.64,insn per cycle
2125.72,msec,task-clock:u,2125723100,100.00,0.955,CPUs utilized
85801707,,dTLB-load-misses:u,2125723100,100.00,,
15025034,,dTLB-store-misses:u,2125723100,100.00,7.068,M/sec
85801707,,dtlb_load_misses.walk_completed:u,2125723100,100.00,40.364,M/sec
15025034,,dtlb_store_misses.walk_completed:u,2125723100,100.00,7.068,M/sec

[RUN] rep=4, huge=off, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random off
runtime_ms=1485.55
gflops=0.0673148

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15626216 kB
  MemAvailable:   15563916 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         209936 kB
  Active(anon):       2888 kB
  Inactive(anon):   162076 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158396 kB
  Mapped:            42840 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76792 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58196 kB
  KernelStack:        4240 kB
  PageTables:         2256 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    120832 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3462638731,,cycles:u,1501372600,100.00,2.306,GHz
2878888414,,instructions:u,1501372600,100.00,0.83,insn per cycle
1501.37,msec,task-clock:u,1501372600,100.00,0.996,CPUs utilized
79799224,,dTLB-load-misses:u,1501372600,100.00,,
14960377,,dTLB-store-misses:u,1501372600,100.00,9.964,M/sec
79799224,,dtlb_load_misses.walk_completed:u,1501372600,100.00,53.151,M/sec
14960377,,dtlb_store_misses.walk_completed:u,1501372600,100.00,9.964,M/sec

[RUN] rep=4, huge=on, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random on
runtime_ms=1267.92
gflops=0.0788691

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15642972 kB
  MemAvailable:   15580672 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193548 kB
  Active(anon):       2896 kB
  Inactive(anon):   145688 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142012 kB
  Mapped:            42748 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4256 kB
  PageTables:         2136 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    104448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2815468816,,cycles:u,1217708300,100.00,2.312,GHz
2871661560,,instructions:u,1217708300,100.00,1.02,insn per cycle
1217.71,msec,task-clock:u,1217708300,100.00,0.948,CPUs utilized
67590690,,dTLB-load-misses:u,1217708300,100.00,,
13344978,,dTLB-store-misses:u,1217708300,100.00,10.959,M/sec
67590690,,dtlb_load_misses.walk_completed:u,1217708300,100.00,55.506,M/sec
13344978,,dtlb_store_misses.walk_completed:u,1217708300,100.00,10.959,M/sec

[RUN] rep=4, huge=off, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random off
runtime_ms=686.274
gflops=0.145714

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15651200 kB
  MemAvailable:   15588900 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         185352 kB
  Active(anon):       2896 kB
  Inactive(anon):   137492 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133808 kB
  Mapped:            42892 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76820 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58224 kB
  KernelStack:        4256 kB
  PageTables:         2104 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1606124370,,cycles:u,694037300,100.00,2.314,GHz
2870115813,,instructions:u,694037300,100.00,1.79,insn per cycle
694.04,msec,task-clock:u,694037300,100.00,0.993,CPUs utilized
5477743,,dTLB-load-misses:u,694037300,100.00,,
3935166,,dTLB-store-misses:u,694037300,100.00,5.670,M/sec
5477743,,dtlb_load_misses.walk_completed:u,694037300,100.00,7.893,M/sec
3935166,,dtlb_store_misses.walk_completed:u,694037300,100.00,5.670,M/sec

[RUN] rep=4, huge=off, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random off
runtime_ms=2205.39
gflops=0.0452877

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15135204 kB
  MemAvailable:   15072904 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701540 kB
  Active(anon):       2896 kB
  Inactive(anon):   653680 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650032 kB
  Mapped:            42772 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76812 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58216 kB
  KernelStack:        4240 kB
  PageTables:         3036 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    612352 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5295938347,,cycles:u,2667432200,100.00,1.985,GHz
3471518828,,instructions:u,2667432200,100.00,0.66,insn per cycle
2667.43,msec,task-clock:u,2667432200,100.00,0.998,CPUs utilized
86303832,,dTLB-load-misses:u,2667432200,100.00,,
14794127,,dTLB-store-misses:u,2667432200,100.00,5.546,M/sec
86303832,,dtlb_load_misses.walk_completed:u,2667432200,100.00,32.355,M/sec
14794127,,dtlb_store_misses.walk_completed:u,2667432200,100.00,5.546,M/sec

[RUN] rep=4, huge=on, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random on
runtime_ms=714.821
gflops=0.139895

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15651820 kB
  MemAvailable:   15589520 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         185288 kB
  Active(anon):       2888 kB
  Inactive(anon):   137428 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133692 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76768 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58172 kB
  KernelStack:        4224 kB
  PageTables:         2012 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1674788175,,cycles:u,722170000,100.00,2.319,GHz
2870115986,,instructions:u,722170000,100.00,1.71,insn per cycle
722.17,msec,task-clock:u,722170000,100.00,0.990,CPUs utilized
8364480,,dTLB-load-misses:u,722170000,100.00,,
4544508,,dTLB-store-misses:u,722170000,100.00,6.293,M/sec
8364480,,dtlb_load_misses.walk_completed:u,722170000,100.00,11.582,M/sec
4544508,,dtlb_store_misses.walk_completed:u,722170000,100.00,6.293,M/sec

[RUN] rep=4, huge=on, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random on
runtime_ms=1632.83
gflops=0.0612431

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15629128 kB
  MemAvailable:   15566828 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62692 kB
  Inactive:         210088 kB
  Active(anon):       2912 kB
  Inactive(anon):   162228 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158640 kB
  Mapped:            43120 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76848 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58252 kB
  KernelStack:        4272 kB
  PageTables:         2244 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    120832 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3503164643,,cycles:u,1524162300,100.00,2.298,GHz
2878888095,,instructions:u,1524162300,100.00,0.82,insn per cycle
1524.16,msec,task-clock:u,1524162300,100.00,0.921,CPUs utilized
79588594,,dTLB-load-misses:u,1524162300,100.00,,
14870227,,dTLB-store-misses:u,1524162300,100.00,9.756,M/sec
79588594,,dtlb_load_misses.walk_completed:u,1524162300,100.00,52.218,M/sec
14870227,,dtlb_store_misses.walk_completed:u,1524162300,100.00,9.756,M/sec

[RUN] rep=4, huge=off, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random off
runtime_ms=1833.19
gflops=0.0545362

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15528060 kB
  MemAvailable:   15465760 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308152 kB
  Active(anon):       2896 kB
  Inactive(anon):   260292 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256588 kB
  Mapped:            42724 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76820 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58224 kB
  KernelStack:        4224 kB
  PageTables:         1992 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    219136 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4285364834,,cycles:u,1938622500,100.00,2.211,GHz
2935624056,,instructions:u,1938622500,100.00,0.69,insn per cycle
1938.62,msec,task-clock:u,1938622500,100.00,0.997,CPUs utilized
85052737,,dTLB-load-misses:u,1938622500,100.00,,
15032930,,dTLB-store-misses:u,1938622500,100.00,7.754,M/sec
85052737,,dtlb_load_misses.walk_completed:u,1938622500,100.00,43.873,M/sec
15032930,,dtlb_store_misses.walk_completed:u,1938622500,100.00,7.754,M/sec

[RUN] rep=4, huge=off, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
runtime_ms=502.624
gflops=0.198956

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662000 kB
  MemAvailable:   15599700 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177692 kB
  Active(anon):       2896 kB
  Inactive(anon):   129832 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126148 kB
  Mapped:            42564 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76792 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58196 kB
  KernelStack:        4240 kB
  PageTables:         1980 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1099703299,,cycles:u,473071200,100.00,2.325,GHz
2943958466,,instructions:u,473071200,100.00,2.68,insn per cycle
473.07,msec,task-clock:u,473071200,100.00,0.922,CPUs utilized
2928,,dTLB-load-misses:u,473071200,100.00,,
2880,,dTLB-store-misses:u,473071200,100.00,6.088,K/sec
2928,,dtlb_load_misses.walk_completed:u,473071200,100.00,6.189,K/sec
2880,,dtlb_store_misses.walk_completed:u,473071200,100.00,6.088,K/sec

[RUN] rep=4, huge=off, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random off
runtime_ms=498.458
gflops=0.200619

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660432 kB
  MemAvailable:   15598132 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178180 kB
  Active(anon):       2896 kB
  Inactive(anon):   130320 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126692 kB
  Mapped:            42788 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76824 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58228 kB
  KernelStack:        4240 kB
  PageTables:         2064 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1168907620,,cycles:u,503542900,100.00,2.321,GHz
2902822644,,instructions:u,503542900,100.00,2.48,insn per cycle
503.54,msec,task-clock:u,503542900,100.00,0.988,CPUs utilized
6690,,dTLB-load-misses:u,503542900,100.00,,
4909,,dTLB-store-misses:u,503542900,100.00,9.749,K/sec
6690,,dtlb_load_misses.walk_completed:u,503542900,100.00,13.286,K/sec
4909,,dtlb_store_misses.walk_completed:u,503542900,100.00,9.749,K/sec

[RUN] rep=4, huge=off, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random off
runtime_ms=595.246
gflops=0.167997

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15658824 kB
  MemAvailable:   15596524 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         179244 kB
  Active(anon):       2904 kB
  Inactive(anon):   131384 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127788 kB
  Mapped:            42832 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76872 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58276 kB
  KernelStack:        4272 kB
  PageTables:         2112 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1398331462,,cycles:u,600683400,100.00,2.328,GHz
2882604324,,instructions:u,600683400,100.00,2.06,insn per cycle
600.68,msec,task-clock:u,600683400,100.00,0.991,CPUs utilized
3831,,dTLB-load-misses:u,600683400,100.00,,
6946,,dTLB-store-misses:u,600683400,100.00,11.563,K/sec
3831,,dtlb_load_misses.walk_completed:u,600683400,100.00,6.378,K/sec
6946,,dtlb_store_misses.walk_completed:u,600683400,100.00,11.563,K/sec

[RUN] rep=4, huge=on, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random on
runtime_ms=599.215
gflops=0.166885

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15659024 kB
  MemAvailable:   15596724 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         178960 kB
  Active(anon):       2904 kB
  Inactive(anon):   131100 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127516 kB
  Mapped:            42768 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76884 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58288 kB
  KernelStack:        4240 kB
  PageTables:         2160 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1407051047,,cycles:u,604729300,100.00,2.327,GHz
2882604566,,instructions:u,604729300,100.00,2.05,insn per cycle
604.73,msec,task-clock:u,604729300,100.00,0.992,CPUs utilized
10182,,dTLB-load-misses:u,604729300,100.00,,
8432,,dTLB-store-misses:u,604729300,100.00,13.943,K/sec
10182,,dtlb_load_misses.walk_completed:u,604729300,100.00,16.837,K/sec
8432,,dtlb_store_misses.walk_completed:u,604729300,100.00,13.943,K/sec

[RUN] rep=4, huge=off, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random off
runtime_ms=2840.15
gflops=0.0351661

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14608252 kB
  MemAvailable:   14545952 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225924 kB
  Active(anon):       2896 kB
  Inactive(anon):  1178064 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174420 kB
  Mapped:            42856 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76828 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58232 kB
  KernelStack:        4240 kB
  PageTables:         4116 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1136640 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6911012601,,cycles:u,3750315100,100.00,1.843,GHz
3727997562,,instructions:u,3750315100,100.00,0.54,insn per cycle
3750.32,msec,task-clock:u,3750315100,100.00,0.999,CPUs utilized
87925671,,dTLB-load-misses:u,3750315100,100.00,,
13759941,,dTLB-store-misses:u,3750315100,100.00,3.669,M/sec
87925671,,dtlb_load_misses.walk_completed:u,3750315100,100.00,23.445,M/sec
13759941,,dtlb_store_misses.walk_completed:u,3750315100,100.00,3.669,M/sec

[RUN] rep=4, huge=on, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random on
runtime_ms=1673.18
gflops=0.0597613

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15592924 kB
  MemAvailable:   15530624 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         242800 kB
  Active(anon):       2896 kB
  Inactive(anon):   194940 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191256 kB
  Mapped:            42716 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76820 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58224 kB
  KernelStack:        4240 kB
  PageTables:         2248 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    153600 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3916652622,,cycles:u,1699808100,100.00,2.304,GHz
2896086431,,instructions:u,1699808100,100.00,0.74,insn per cycle
1699.81,msec,task-clock:u,1699808100,100.00,0.996,CPUs utilized
83877673,,dTLB-load-misses:u,1699808100,100.00,,
15161604,,dTLB-store-misses:u,1699808100,100.00,8.920,M/sec
83877673,,dtlb_load_misses.walk_completed:u,1699808100,100.00,49.345,M/sec
15161604,,dtlb_store_misses.walk_completed:u,1699808100,100.00,8.920,M/sec

[RUN] rep=4, huge=on, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random on
runtime_ms=694.443
gflops=0.144

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660160 kB
  MemAvailable:   15597860 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         178032 kB
  Active(anon):       2904 kB
  Inactive(anon):   130172 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126552 kB
  Mapped:            42720 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76844 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58248 kB
  KernelStack:        4256 kB
  PageTables:         2164 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1126312552,,cycles:u,486958000,100.00,2.313,GHz
2902813518,,instructions:u,486958000,100.00,2.58,insn per cycle
486.96,msec,task-clock:u,486958000,100.00,0.692,CPUs utilized
3491,,dTLB-load-misses:u,486958000,100.00,,
4310,,dTLB-store-misses:u,486958000,100.00,8.851,K/sec
3491,,dtlb_load_misses.walk_completed:u,486958000,100.00,7.169,K/sec
4310,,dtlb_store_misses.walk_completed:u,486958000,100.00,8.851,K/sec

[RUN] rep=4, huge=off, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random off
runtime_ms=1216.53
gflops=0.0822005

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15642024 kB
  MemAvailable:   15579724 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         193540 kB
  Active(anon):       2904 kB
  Inactive(anon):   145680 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142028 kB
  Mapped:            42548 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76848 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58252 kB
  KernelStack:        4240 kB
  PageTables:         2040 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    104448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2814856511,,cycles:u,1234724200,100.00,2.280,GHz
2871660826,,instructions:u,1234724200,100.00,1.02,insn per cycle
1234.72,msec,task-clock:u,1234724200,100.00,0.995,CPUs utilized
66959389,,dTLB-load-misses:u,1234724200,100.00,,
13187580,,dTLB-store-misses:u,1234724200,100.00,10.681,M/sec
66959389,,dtlb_load_misses.walk_completed:u,1234724200,100.00,54.230,M/sec
13187580,,dtlb_store_misses.walk_completed:u,1234724200,100.00,10.681,M/sec

[RUN] rep=4, huge=on, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random on
runtime_ms=742.1
gflops=0.134752

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15654788 kB
  MemAvailable:   15592488 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         181188 kB
  Active(anon):       2888 kB
  Inactive(anon):   133328 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129588 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76868 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58272 kB
  KernelStack:        4224 kB
  PageTables:         1988 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     92160 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1602975430,,cycles:u,696400800,100.00,2.302,GHz
2873260730,,instructions:u,696400800,100.00,1.79,insn per cycle
696.40,msec,task-clock:u,696400800,100.00,0.925,CPUs utilized
8407,,dTLB-load-misses:u,696400800,100.00,,
10467,,dTLB-store-misses:u,696400800,100.00,15.030,K/sec
8407,,dtlb_load_misses.walk_completed:u,696400800,100.00,12.072,K/sec
10467,,dtlb_store_misses.walk_completed:u,696400800,100.00,15.030,K/sec

[RUN] rep=4, huge=on, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random on
runtime_ms=465.136
gflops=0.214991

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660260 kB
  MemAvailable:   15597960 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         177688 kB
  Active(anon):       2896 kB
  Inactive(anon):   129828 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126172 kB
  Mapped:            42912 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76840 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58244 kB
  KernelStack:        4240 kB
  PageTables:         2084 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     90112 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1090780410,,cycles:u,469529900,100.00,2.323,GHz
2943959015,,instructions:u,469529900,100.00,2.70,insn per cycle
469.53,msec,task-clock:u,469529900,100.00,0.989,CPUs utilized
4572,,dTLB-load-misses:u,469529900,100.00,,
3326,,dTLB-store-misses:u,469529900,100.00,7.084,K/sec
4572,,dtlb_load_misses.walk_completed:u,469529900,100.00,9.737,K/sec
3326,,dtlb_store_misses.walk_completed:u,469529900,100.00,7.084,K/sec

[RUN] rep=4, huge=on, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random on
runtime_ms=3086.69
gflops=0.0323573

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14608352 kB
  MemAvailable:   14546052 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225832 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177972 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174320 kB
  Mapped:            42824 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76832 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58236 kB
  KernelStack:        4240 kB
  PageTables:         4048 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1136640 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
7001059140,,cycles:u,4056102300,100.00,1.726,GHz
3727997125,,instructions:u,4056102300,100.00,0.53,insn per cycle
4056.10,msec,task-clock:u,4056102300,100.00,0.998,CPUs utilized
88039889,,dTLB-load-misses:u,4056102300,100.00,,
13695169,,dTLB-store-misses:u,4056102300,100.00,3.376,M/sec
88039889,,dtlb_load_misses.walk_completed:u,4056102300,100.00,21.706,M/sec
13695169,,dtlb_store_misses.walk_completed:u,4056102300,100.00,3.376,M/sec

[RUN] rep=4, huge=off, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random off
runtime_ms=1707.97
gflops=0.058544

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15595040 kB
  MemAvailable:   15532740 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         242712 kB
  Active(anon):       2896 kB
  Inactive(anon):   194852 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191160 kB
  Mapped:            42568 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76832 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58236 kB
  KernelStack:        4240 kB
  PageTables:         2180 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    157696 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3953056477,,cycles:u,1737735800,100.00,2.275,GHz
2896076490,,instructions:u,1737735800,100.00,0.73,insn per cycle
1737.74,msec,task-clock:u,1737735800,100.00,0.997,CPUs utilized
84299769,,dTLB-load-misses:u,1737735800,100.00,,
15273693,,dTLB-store-misses:u,1737735800,100.00,8.789,M/sec
84299769,,dtlb_load_misses.walk_completed:u,1737735800,100.00,48.511,M/sec
15273693,,dtlb_store_misses.walk_completed:u,1737735800,100.00,8.789,M/sec

[RUN] rep=4, huge=on, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random on
runtime_ms=1987.8
gflops=0.050278

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15396056 kB
  MemAvailable:   15333756 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439412 kB
  Active(anon):       2896 kB
  Inactive(anon):   391552 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387868 kB
  Mapped:            42816 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76848 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58252 kB
  KernelStack:        4256 kB
  PageTables:         2596 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    354304 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4717164787,,cycles:u,2145507500,100.00,2.199,GHz
3032597783,,instructions:u,2145507500,100.00,0.64,insn per cycle
2145.51,msec,task-clock:u,2145507500,100.00,0.997,CPUs utilized
85698357,,dTLB-load-misses:u,2145507500,100.00,,
14953589,,dTLB-store-misses:u,2145507500,100.00,6.970,M/sec
85698357,,dtlb_load_misses.walk_completed:u,2145507500,100.00,39.943,M/sec
14953589,,dtlb_store_misses.walk_completed:u,2145507500,100.00,6.970,M/sec

[RUN] rep=4, huge=on, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random on
runtime_ms=2231.28
gflops=0.0447621

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15133236 kB
  MemAvailable:   15070936 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701540 kB
  Active(anon):       2896 kB
  Inactive(anon):   653680 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650028 kB
  Mapped:            42732 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76876 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58280 kB
  KernelStack:        4240 kB
  PageTables:         2792 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    616448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5343837617,,cycles:u,2544370900,100.00,2.100,GHz
3471518928,,instructions:u,2544370900,100.00,0.65,insn per cycle
2544.37,msec,task-clock:u,2544370900,100.00,0.996,CPUs utilized
86325238,,dTLB-load-misses:u,2544370900,100.00,,
14774984,,dTLB-store-misses:u,2544370900,100.00,5.807,M/sec
86325238,,dtlb_load_misses.walk_completed:u,2544370900,100.00,33.928,M/sec
14774984,,dtlb_store_misses.walk_completed:u,2544370900,100.00,5.807,M/sec

[RUN] rep=4, huge=on, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random on
runtime_ms=1818.12
gflops=0.0549883

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15527512 kB
  MemAvailable:   15465212 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308236 kB
  Active(anon):       2896 kB
  Inactive(anon):   260376 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256692 kB
  Mapped:            42800 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76876 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58280 kB
  KernelStack:        4240 kB
  PageTables:         2128 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    223232 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4257867665,,cycles:u,1864421500,100.00,2.284,GHz
2935624182,,instructions:u,1864421500,100.00,0.69,insn per cycle
1864.42,msec,task-clock:u,1864421500,100.00,0.996,CPUs utilized
84948658,,dTLB-load-misses:u,1864421500,100.00,,
15020579,,dTLB-store-misses:u,1864421500,100.00,8.056,M/sec
84948658,,dtlb_load_misses.walk_completed:u,1864421500,100.00,45.563,M/sec
15020579,,dtlb_store_misses.walk_completed:u,1864421500,100.00,8.056,M/sec

[RUN] rep=5, huge=on, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random on
runtime_ms=1654.43
gflops=0.0604437

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15625660 kB
  MemAvailable:   15563360 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         210032 kB
  Active(anon):       2888 kB
  Inactive(anon):   162172 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158492 kB
  Mapped:            42876 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76868 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58272 kB
  KernelStack:        4256 kB
  PageTables:         2068 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    124928 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3518600861,,cycles:u,1539830600,100.00,2.285,GHz
2878888282,,instructions:u,1539830600,100.00,0.82,insn per cycle
1539.83,msec,task-clock:u,1539830600,100.00,0.919,CPUs utilized
79600730,,dTLB-load-misses:u,1539830600,100.00,,
14905464,,dTLB-store-misses:u,1539830600,100.00,9.680,M/sec
79600730,,dtlb_load_misses.walk_completed:u,1539830600,100.00,51.694,M/sec
14905464,,dtlb_store_misses.walk_completed:u,1539830600,100.00,9.680,M/sec

[RUN] rep=5, huge=on, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random on
runtime_ms=2021.22
gflops=0.0494466

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15397976 kB
  MemAvailable:   15335676 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         439396 kB
  Active(anon):       2896 kB
  Inactive(anon):   391536 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        387884 kB
  Mapped:            42728 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76856 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58260 kB
  KernelStack:        4240 kB
  PageTables:         2428 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    354304 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4802187682,,cycles:u,2238342000,100.00,2.145,GHz
3032597059,,instructions:u,2238342000,100.00,0.63,insn per cycle
2238.34,msec,task-clock:u,2238342000,100.00,0.997,CPUs utilized
85673568,,dTLB-load-misses:u,2238342000,100.00,,
15013487,,dTLB-store-misses:u,2238342000,100.00,6.707,M/sec
85673568,,dtlb_load_misses.walk_completed:u,2238342000,100.00,38.275,M/sec
15013487,,dtlb_store_misses.walk_completed:u,2238342000,100.00,6.707,M/sec

[RUN] rep=5, huge=off, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random off
runtime_ms=607.272
gflops=0.16467

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660356 kB
  MemAvailable:   15598056 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         179096 kB
  Active(anon):       2904 kB
  Inactive(anon):   131236 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127616 kB
  Mapped:            42816 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76856 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58260 kB
  KernelStack:        4256 kB
  PageTables:         2228 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1400216794,,cycles:u,613335100,100.00,2.283,GHz
2882613795,,instructions:u,613335100,100.00,2.06,insn per cycle
613.34,msec,task-clock:u,613335100,100.00,0.994,CPUs utilized
17118,,dTLB-load-misses:u,613335100,100.00,,
10644,,dTLB-store-misses:u,613335100,100.00,17.354,K/sec
17118,,dtlb_load_misses.walk_completed:u,613335100,100.00,27.910,K/sec
10644,,dtlb_store_misses.walk_completed:u,613335100,100.00,17.354,K/sec

[RUN] rep=5, huge=on, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random on
runtime_ms=707.613
gflops=0.14132

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15651188 kB
  MemAvailable:   15588888 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         185256 kB
  Active(anon):       2904 kB
  Inactive(anon):   137396 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        134036 kB
  Mapped:            42492 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76856 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58260 kB
  KernelStack:        4256 kB
  PageTables:         2228 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    100352 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1655138674,,cycles:u,715244600,100.00,2.314,GHz
2870115471,,instructions:u,715244600,100.00,1.73,insn per cycle
715.24,msec,task-clock:u,715244600,100.00,0.994,CPUs utilized
9850210,,dTLB-load-misses:u,715244600,100.00,,
5712590,,dTLB-store-misses:u,715244600,100.00,7.987,M/sec
9850210,,dtlb_load_misses.walk_completed:u,715244600,100.00,13.772,M/sec
5712590,,dtlb_store_misses.walk_completed:u,715244600,100.00,7.987,M/sec

[RUN] rep=5, huge=on, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random on
runtime_ms=2873.78
gflops=0.0347546

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14609468 kB
  MemAvailable:   14547168 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225840 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177980 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174328 kB
  Mapped:            42720 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76876 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58280 kB
  KernelStack:        4240 kB
  PageTables:         4000 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1140736 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
7021800176,,cycles:u,3678657100,100.00,1.909,GHz
3727997978,,instructions:u,3678657100,100.00,0.53,insn per cycle
3678.66,msec,task-clock:u,3678657100,100.00,0.998,CPUs utilized
87910749,,dTLB-load-misses:u,3678657100,100.00,,
13765777,,dTLB-store-misses:u,3678657100,100.00,3.742,M/sec
87910749,,dtlb_load_misses.walk_completed:u,3678657100,100.00,23.898,M/sec
13765777,,dtlb_store_misses.walk_completed:u,3678657100,100.00,3.742,M/sec

[RUN] rep=5, huge=on, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random on
runtime_ms=682.6
gflops=0.146498

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15655340 kB
  MemAvailable:   15593040 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181264 kB
  Active(anon):       2896 kB
  Inactive(anon):   133404 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129720 kB
  Mapped:            42788 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76876 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58280 kB
  KernelStack:        4240 kB
  PageTables:         2180 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1587954776,,cycles:u,688622300,100.00,2.306,GHz
2873260753,,instructions:u,688622300,100.00,1.81,insn per cycle
688.62,msec,task-clock:u,688622300,100.00,0.991,CPUs utilized
27296,,dTLB-load-misses:u,688622300,100.00,,
13990,,dTLB-store-misses:u,688622300,100.00,20.316,K/sec
27296,,dtlb_load_misses.walk_completed:u,688622300,100.00,39.639,K/sec
13990,,dtlb_store_misses.walk_completed:u,688622300,100.00,20.316,K/sec

[RUN] rep=5, huge=on, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random on
runtime_ms=2042.31
gflops=0.048952

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15527944 kB
  MemAvailable:   15465644 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         308228 kB
  Active(anon):       2904 kB
  Inactive(anon):   260368 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256716 kB
  Mapped:            42808 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76880 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58284 kB
  KernelStack:        4256 kB
  PageTables:         2056 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    223232 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4254036533,,cycles:u,1860162300,100.00,2.287,GHz
2935623963,,instructions:u,1860162300,100.00,0.69,insn per cycle
1860.16,msec,task-clock:u,1860162300,100.00,0.888,CPUs utilized
85009209,,dTLB-load-misses:u,1860162300,100.00,,
15086517,,dTLB-store-misses:u,1860162300,100.00,8.110,M/sec
85009209,,dtlb_load_misses.walk_completed:u,1860162300,100.00,45.700,M/sec
15086517,,dtlb_store_misses.walk_completed:u,1860162300,100.00,8.110,M/sec

[RUN] rep=5, huge=off, pages=1024
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 1024 4096 1 64 48828 2.0 random off
runtime_ms=691.649
gflops=0.144582

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15654632 kB
  MemAvailable:   15592332 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         185288 kB
  Active(anon):       2888 kB
  Inactive(anon):   137428 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        133688 kB
  Mapped:            42704 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76836 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58240 kB
  KernelStack:        4240 kB
  PageTables:         1900 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1075364 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    100352 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 6144 kB (after)
1617719983,,cycles:u,699432100,100.00,2.313,GHz
2870116167,,instructions:u,699432100,100.00,1.77,insn per cycle
699.43,msec,task-clock:u,699432100,100.00,0.993,CPUs utilized
7076821,,dTLB-load-misses:u,699432100,100.00,,
4498425,,dTLB-store-misses:u,699432100,100.00,6.432,M/sec
7076821,,dtlb_load_misses.walk_completed:u,699432100,100.00,10.118,M/sec
4498425,,dtlb_store_misses.walk_completed:u,699432100,100.00,6.432,M/sec

[RUN] rep=5, huge=off, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random off
runtime_ms=501.175
gflops=0.199531

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15660212 kB
  MemAvailable:   15597912 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178020 kB
  Active(anon):       2896 kB
  Inactive(anon):   130160 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126476 kB
  Mapped:            42716 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76868 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58272 kB
  KernelStack:        4256 kB
  PageTables:         2084 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1161352054,,cycles:u,505940300,100.00,2.295,GHz
2905197122,,instructions:u,505940300,100.00,2.50,insn per cycle
505.94,msec,task-clock:u,505940300,100.00,0.989,CPUs utilized
3809,,dTLB-load-misses:u,505940300,100.00,,
4561,,dTLB-store-misses:u,505940300,100.00,9.015,K/sec
3809,,dtlb_load_misses.walk_completed:u,505940300,100.00,7.529,K/sec
4561,,dtlb_store_misses.walk_completed:u,505940300,100.00,9.015,K/sec

[RUN] rep=5, huge=on, pages=128
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 128 4096 1 64 390625 2.0 random on
runtime_ms=494.123
gflops=0.202379

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662560 kB
  MemAvailable:   15600260 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178020 kB
  Active(anon):       2896 kB
  Inactive(anon):   130160 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126552 kB
  Mapped:            42876 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76872 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58276 kB
  KernelStack:        4256 kB
  PageTables:         2068 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1068196 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1159438530,,cycles:u,499128900,100.00,2.323,GHz
2902813068,,instructions:u,499128900,100.00,2.50,insn per cycle
499.13,msec,task-clock:u,499128900,100.00,0.985,CPUs utilized
7271,,dTLB-load-misses:u,499128900,100.00,,
5059,,dTLB-store-misses:u,499128900,100.00,10.136,K/sec
7271,,dtlb_load_misses.walk_completed:u,499128900,100.00,14.567,K/sec
5059,,dtlb_store_misses.walk_completed:u,499128900,100.00,10.136,K/sec

[RUN] rep=5, huge=off, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random off
runtime_ms=498.5
gflops=0.200602

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15662008 kB
  MemAvailable:   15599708 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         177608 kB
  Active(anon):       2904 kB
  Inactive(anon):   129748 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126152 kB
  Mapped:            42744 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4240 kB
  PageTables:         1904 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1087719987,,cycles:u,468510600,100.00,2.322,GHz
2943968488,,instructions:u,468510600,100.00,2.71,insn per cycle
468.51,msec,task-clock:u,468510600,100.00,0.923,CPUs utilized
3177,,dTLB-load-misses:u,468510600,100.00,,
2956,,dTLB-store-misses:u,468510600,100.00,6.309,K/sec
3177,,dtlb_load_misses.walk_completed:u,468510600,100.00,6.781,K/sec
2956,,dtlb_store_misses.walk_completed:u,468510600,100.00,6.309,K/sec

[RUN] rep=5, huge=on, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random on
runtime_ms=1665.15
gflops=0.0600496

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15597380 kB
  MemAvailable:   15535080 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         242872 kB
  Active(anon):       2904 kB
  Inactive(anon):   195012 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191384 kB
  Mapped:            43036 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76888 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58292 kB
  KernelStack:        4272 kB
  PageTables:         2248 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132700 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    157696 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3895086878,,cycles:u,1729833900,100.00,2.252,GHz
2896076337,,instructions:u,1729833900,100.00,0.74,insn per cycle
1729.83,msec,task-clock:u,1729833900,100.00,0.997,CPUs utilized
83609090,,dTLB-load-misses:u,1729833900,100.00,,
15129248,,dTLB-store-misses:u,1729833900,100.00,8.746,M/sec
83609090,,dtlb_load_misses.walk_completed:u,1729833900,100.00,48.334,M/sec
15129248,,dtlb_store_misses.walk_completed:u,1729833900,100.00,8.746,M/sec

[RUN] rep=5, huge=off, pages=16384
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 16384 4096 1 64 3051 2.0 random off
runtime_ms=1805.28
gflops=0.0553792

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15529492 kB
  MemAvailable:   15467192 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         308324 kB
  Active(anon):       2896 kB
  Inactive(anon):   260464 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        256812 kB
  Mapped:            42916 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76888 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58292 kB
  KernelStack:        4256 kB
  PageTables:         2240 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1198244 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    223232 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 129024 kB (after)
4243587293,,cycles:u,1887697200,100.00,2.248,GHz
2935624155,,instructions:u,1887697200,100.00,0.69,insn per cycle
1887.70,msec,task-clock:u,1887697200,100.00,0.996,CPUs utilized
84963793,,dTLB-load-misses:u,1887697200,100.00,,
15036173,,dTLB-store-misses:u,1887697200,100.00,7.965,M/sec
84963793,,dtlb_load_misses.walk_completed:u,1887697200,100.00,45.009,M/sec
15036173,,dtlb_store_misses.walk_completed:u,1887697200,100.00,7.965,M/sec

[RUN] rep=5, huge=on, pages=64
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 64 4096 1 64 781250 2.0 random on
runtime_ms=464.27
gflops=0.215392

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15663456 kB
  MemAvailable:   15601156 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         177756 kB
  Active(anon):       2888 kB
  Inactive(anon):   129896 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        126256 kB
  Mapped:            42896 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76888 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58292 kB
  KernelStack:        4256 kB
  PageTables:         2028 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1067684 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27496 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1089829499,,cycles:u,468746500,100.00,2.325,GHz
2943958479,,instructions:u,468746500,100.00,2.70,insn per cycle
468.75,msec,task-clock:u,468746500,100.00,0.987,CPUs utilized
5135,,dTLB-load-misses:u,468746500,100.00,,
3339,,dTLB-store-misses:u,468746500,100.00,7.123,K/sec
5135,,dtlb_load_misses.walk_completed:u,468746500,100.00,10.955,K/sec
3339,,dtlb_store_misses.walk_completed:u,468746500,100.00,7.123,K/sec

[RUN] rep=5, huge=off, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random off
runtime_ms=2239.73
gflops=0.0445932

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15135828 kB
  MemAvailable:   15073528 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         701696 kB
  Active(anon):       2896 kB
  Inactive(anon):   653836 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650164 kB
  Mapped:            42916 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76876 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58280 kB
  KernelStack:        4272 kB
  PageTables:         2976 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    616448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5372530419,,cycles:u,2626919000,100.00,2.045,GHz
3471519206,,instructions:u,2626919000,100.00,0.65,insn per cycle
2626.92,msec,task-clock:u,2626919000,100.00,0.997,CPUs utilized
86314939,,dTLB-load-misses:u,2626919000,100.00,,
14786649,,dTLB-store-misses:u,2626919000,100.00,5.629,M/sec
86314939,,dtlb_load_misses.walk_completed:u,2626919000,100.00,32.858,M/sec
14786649,,dtlb_store_misses.walk_completed:u,2626919000,100.00,5.629,M/sec

[RUN] rep=5, huge=off, pages=32768
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 32768 4096 1 64 1525 2.0 random off
runtime_ms=2047.29
gflops=0.0488169

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15399328 kB
  MemAvailable:   15337028 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62692 kB
  Inactive:         439476 kB
  Active(anon):       2912 kB
  Inactive(anon):   391616 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        388024 kB
  Mapped:            43096 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76896 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58300 kB
  KernelStack:        4272 kB
  PageTables:         2600 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1329316 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    354304 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 260096 kB (after)
4705309407,,cycles:u,2066263900,100.00,2.277,GHz
3032597521,,instructions:u,2066263900,100.00,0.64,insn per cycle
2066.26,msec,task-clock:u,2066263900,100.00,0.964,CPUs utilized
85663339,,dTLB-load-misses:u,2066263900,100.00,,
14979636,,dTLB-store-misses:u,2066263900,100.00,7.250,M/sec
85663339,,dtlb_load_misses.walk_completed:u,2066263900,100.00,41.458,M/sec
14979636,,dtlb_store_misses.walk_completed:u,2066263900,100.00,7.250,M/sec

[RUN] rep=5, huge=off, pages=131072
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 131072 4096 1 64 381 2.0 random off
runtime_ms=2843.54
gflops=0.0351241

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        14610856 kB
  MemAvailable:   14548556 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:        1225828 kB
  Active(anon):       2896 kB
  Inactive(anon):  1177968 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:       1174320 kB
  Mapped:            42744 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76864 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58268 kB
  KernelStack:        4240 kB
  PageTables:         3936 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    2115748 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:   1140736 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 1046528 kB (after)
6947284239,,cycles:u,3628885400,100.00,1.914,GHz
3727997087,,instructions:u,3628885400,100.00,0.54,insn per cycle
3628.89,msec,task-clock:u,3628885400,100.00,0.998,CPUs utilized
87973581,,dTLB-load-misses:u,3628885400,100.00,,
13724201,,dTLB-store-misses:u,3628885400,100.00,3.782,M/sec
87973581,,dtlb_load_misses.walk_completed:u,3628885400,100.00,24.243,M/sec
13724201,,dtlb_store_misses.walk_completed:u,3628885400,100.00,3.782,M/sec

[RUN] rep=5, huge=off, pages=8192
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 8192 4096 1 64 6103 2.0 random off
runtime_ms=1676.2
gflops=0.0596537

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15595580 kB
  MemAvailable:   15533280 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         242700 kB
  Active(anon):       2896 kB
  Inactive(anon):   194840 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        191160 kB
  Mapped:            42812 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76864 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58268 kB
  KernelStack:        4240 kB
  PageTables:         2184 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1132708 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    157696 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 63488 kB (after)
3892707116,,cycles:u,1702543500,100.00,2.286,GHz
2896076308,,instructions:u,1702543500,100.00,0.74,insn per cycle
1702.54,msec,task-clock:u,1702543500,100.00,0.997,CPUs utilized
83420113,,dTLB-load-misses:u,1702543500,100.00,,
15091795,,dTLB-store-misses:u,1702543500,100.00,8.864,M/sec
83420113,,dtlb_load_misses.walk_completed:u,1702543500,100.00,48.997,M/sec
15091795,,dtlb_store_misses.walk_completed:u,1702543500,100.00,8.864,M/sec

[RUN] rep=5, huge=off, pages=4096
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 4096 4096 1 64 12207 2.0 random off
runtime_ms=1736.38
gflops=0.0575908

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15628060 kB
  MemAvailable:   15565760 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         209920 kB
  Active(anon):       2904 kB
  Inactive(anon):   162060 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        158416 kB
  Mapped:            42736 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76896 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58300 kB
  KernelStack:        4240 kB
  PageTables:         2172 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1099940 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    124928 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 30720 kB (after)
3519528419,,cycles:u,1532536100,100.00,2.297,GHz
2878888166,,instructions:u,1532536100,100.00,0.82,insn per cycle
1532.54,msec,task-clock:u,1532536100,100.00,0.872,CPUs utilized
80205581,,dTLB-load-misses:u,1532536100,100.00,,
15081855,,dTLB-store-misses:u,1532536100,100.00,9.841,M/sec
80205581,,dtlb_load_misses.walk_completed:u,1532536100,100.00,52.335,M/sec
15081855,,dtlb_store_misses.walk_completed:u,1532536100,100.00,9.841,M/sec

[RUN] rep=5, huge=off, pages=512
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 512 4096 1 64 97656 2.0 random off
runtime_ms=663.73
gflops=0.150663

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15656896 kB
  MemAvailable:   15594596 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         181252 kB
  Active(anon):       2896 kB
  Inactive(anon):   133392 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        129712 kB
  Mapped:            42800 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76936 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58340 kB
  KernelStack:        4240 kB
  PageTables:         2140 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1071268 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     96256 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 2048 kB (after)
1556239268,,cycles:u,669964200,100.00,2.323,GHz
2873260666,,instructions:u,669964200,100.00,1.85,insn per cycle
669.96,msec,task-clock:u,669964200,100.00,0.993,CPUs utilized
19666,,dTLB-load-misses:u,669964200,100.00,,
12066,,dTLB-store-misses:u,669964200,100.00,18.010,K/sec
19666,,dtlb_load_misses.walk_completed:u,669964200,100.00,29.354,K/sec
12066,,dtlb_store_misses.walk_completed:u,669964200,100.00,18.010,K/sec

[RUN] rep=5, huge=on, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random on
runtime_ms=1243.05
gflops=0.080447

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15644172 kB
  MemAvailable:   15581872 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         193548 kB
  Active(anon):       2896 kB
  Inactive(anon):   145688 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        142012 kB
  Mapped:            42568 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76900 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58304 kB
  KernelStack:        4256 kB
  PageTables:         2076 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    108544 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2819506432,,cycles:u,1215686700,100.00,2.319,GHz
2871661579,,instructions:u,1215686700,100.00,1.02,insn per cycle
1215.69,msec,task-clock:u,1215686700,100.00,0.965,CPUs utilized
67254073,,dTLB-load-misses:u,1215686700,100.00,,
13429842,,dTLB-store-misses:u,1215686700,100.00,11.047,M/sec
67254073,,dtlb_load_misses.walk_completed:u,1215686700,100.00,55.322,M/sec
13429842,,dtlb_store_misses.walk_completed:u,1215686700,100.00,11.047,M/sec

[RUN] rep=5, huge=on, pages=65536
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 65536 4096 1 64 762 2.0 random on
runtime_ms=2231.8
gflops=0.0447517

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15137352 kB
  MemAvailable:   15075052 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62684 kB
  Inactive:         701548 kB
  Active(anon):       2904 kB
  Inactive(anon):   653688 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        650032 kB
  Mapped:            42828 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76852 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58256 kB
  KernelStack:        4240 kB
  PageTables:         2788 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1591460 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    616448 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 522240 kB (after)
5331456663,,cycles:u,2685657300,100.00,1.985,GHz
3471518934,,instructions:u,2685657300,100.00,0.65,insn per cycle
2685.66,msec,task-clock:u,2685657300,100.00,0.998,CPUs utilized
86322337,,dTLB-load-misses:u,2685657300,100.00,,
14835014,,dTLB-store-misses:u,2685657300,100.00,5.524,M/sec
86322337,,dtlb_load_misses.walk_completed:u,2685657300,100.00,32.142,M/sec
14835014,,dtlb_store_misses.walk_completed:u,2685657300,100.00,5.524,M/sec

[RUN] rep=5, huge=off, pages=2048
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 2048 4096 1 64 24414 2.0 random off
runtime_ms=1207.13
gflops=0.082841

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15643824 kB
  MemAvailable:   15581524 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62668 kB
  Inactive:         193476 kB
  Active(anon):       2888 kB
  Inactive(anon):   145616 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        141876 kB
  Mapped:            42708 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76812 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58216 kB
  KernelStack:        4224 kB
  PageTables:         2020 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1083556 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:    108544 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (before)
[THP] madvise: MADV_NOHUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 14336 kB (after)
2829528371,,cycles:u,1218435900,100.00,2.322,GHz
2871661258,,instructions:u,1218435900,100.00,1.01,insn per cycle
1218.44,msec,task-clock:u,1218435900,100.00,0.996,CPUs utilized
67946272,,dTLB-load-misses:u,1218435900,100.00,,
13443507,,dTLB-store-misses:u,1218435900,100.00,11.033,M/sec
67946272,,dtlb_load_misses.walk_completed:u,1218435900,100.00,55.765,M/sec
13443507,,dtlb_store_misses.walk_completed:u,1218435900,100.00,11.033,M/sec

[RUN] rep=5, huge=on, pages=256
Command: perf stat -x , -e cycles,instructions,task-clock,dTLB-load-misses,dTLB-store-misses,dtlb_load_misses.walk_completed,dtlb_store_misses.walk_completed taskset -c 0 build/saxpy_tlb 256 4096 1 64 195312 2.0 random on
runtime_ms=609.932
gflops=0.163952

[STDERR]
[THP] ----- BEFORE madvise -----
[THP] enabled: [always] madvise never
[THP] defrag : always defer defer+madvise [madvise] never
[THP] /proc/meminfo AnonHugePages (first 5 lines shown around it):
  MemTotal:       16224440 kB
  MemFree:        15659976 kB
  MemAvailable:   15597676 kB
  Buffers:             476 kB
  Cached:           109996 kB
  SwapCached:         5136 kB
  Active:            62676 kB
  Inactive:         178984 kB
  Active(anon):       2896 kB
  Inactive(anon):   131124 kB
  Active(file):      59780 kB
  Inactive(file):    47860 kB
  Unevictable:           0 kB
  Mlocked:               0 kB
  SwapTotal:       4194304 kB
  SwapFree:        4162552 kB
  Dirty:                 0 kB
  Writeback:             0 kB
  AnonPages:        127472 kB
  Mapped:            42844 kB
  Shmem:              2832 kB
  KReclaimable:      18596 kB
  Slab:              76860 kB
  SReclaimable:      18596 kB
  SUnreclaim:        58264 kB
  KernelStack:        4240 kB
  PageTables:         2108 kB
  SecPageTables:         0 kB
  NFS_Unstable:          0 kB
  Bounce:                0 kB
  WritebackTmp:          0 kB
  CommitLimit:    12306524 kB
  Committed_AS:    1069220 kB
  VmallocTotal:   34359738367 kB
  VmallocUsed:       27480 kB
  VmallocChunk:          0 kB
  Percpu:             4608 kB
  HardwareCorrupted:     0 kB
  AnonHugePages:     94208 kB
  ShmemHugePages:        0 kB
  ShmemPmdMapped:        0 kB
  FileHugePages:         0 kB
  FilePmdMapped:         0 kB
  Unaccepted:            0 kB
  HugePages_Total:       0
  HugePages_Free:        0
  HugePages_Rsvd:        0
  HugePages_Surp:        0
  Hugepagesize:       2048 kB
  Hugetlb:               0 kB
  DirectMap4k:       23552 kB
  DirectMap2M:     5064704 kB
  DirectMap1G:    19922944 kB
[THP] /proc/self/smaps AnonHugePages total: 0 kB (before)
[THP] madvise: MADV_HUGEPAGE
[THP] /proc/self/smaps AnonHugePages total: 0 kB (after)
1426425784,,cycles:u,615704600,100.00,2.317,GHz
2882604128,,instructions:u,615704600,100.00,2.02,insn per cycle
615.70,msec,task-clock:u,615704600,100.00,0.992,CPUs utilized
17461,,dTLB-load-misses:u,615704600,100.00,,
9671,,dTLB-store-misses:u,615704600,100.00,15.707,K/sec
17461,,dtlb_load_misses.walk_completed:u,615704600,100.00,28.359,K/sec
9671,,dtlb_store_misses.walk_completed:u,615704600,100.00,15.707,K/sec

